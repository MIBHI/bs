/*! wollanupjs 11-03-2019 */

this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates["Bs/View/Alert/alert"]=Handlebars.template({1:function(t,e,n,o,i){return" alert-dismissible"},3:function(t,e,n,o,i){return'\t<button style="position: relative; z-index: 2" type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n'},5:function(t,e,n,o,i){var r,s,a=null!=e?e:t.nullContext||{};return"\t\t\t<h4 "+(null!=(r=n.if.call(a,null!=e?e.translateTitle:e,{name:"if",hash:{},fn:t.program(6,i,0),inverse:t.noop,data:i}))?r:"")+">\n\t\t\t\t"+t.escapeExpression("function"==typeof(s=null!=(s=n.title||(null!=e?e.title:e))?s:n.helperMissing)?s.call(a,{name:"title",hash:{},data:i}):s)+"\n\t\t\t</h4><br>\n"},6:function(t,e,n,o,i){var r;return'data-i18n="'+t.escapeExpression("function"==typeof(r=null!=(r=n.title||(null!=e?e.title:e))?r:n.helperMissing)?r.call(null!=e?e:t.nullContext||{},{name:"title",hash:{},data:i}):r)+'"'},8:function(t,e,n,o,i){var r;return'data-i18n="'+t.escapeExpression("function"==typeof(r=null!=(r=n.msg||(null!=e?e.msg:e))?r:n.helperMissing)?r.call(null!=e?e:t.nullContext||{},{name:"msg",hash:{},data:i}):r)+'"'},10:function(t,e,n,o,i){var r,s;return null!=(r="function"==typeof(s=null!=(s=n.msg||(null!=e?e.msg:e))?s:n.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"msg",hash:{},data:i}):s)?r:""},compiler:[7,">= 4.0.0"],main:function(t,e,n,o,i){var r,s,a=null!=e?e:t.nullContext||{},l=n.helperMissing,u="function",p=t.escapeExpression;return'<div class="alert alert-'+p(typeof(s=null!=(s=n.type||(null!=e?e.type:e))?s:l)===u?s.call(a,{name:"type",hash:{},data:i}):s)+(null!=(r=n.if.call(a,null!=e?e.dismissible:e,{name:"if",hash:{},fn:t.program(1,i,0),inverse:t.noop,data:i}))?r:"")+'" role="alert">\n\t<div style="position: absolute;top: 0;bottom: 0;left: 0;right: 0;overflow: hidden;z-index:1">\n\t\t<i style="position: absolute;bottom: -30px;right:-30px;font-size:10em;opacity: .2;display:none" class="alert-icon '+p(typeof(s=null!=(s=n.icon||(null!=e?e.icon:e))?s:l)===u?s.call(a,{name:"icon",hash:{},data:i}):s)+'"></i>\n\t</div>\n'+(null!=(r=n.if.call(a,null!=e?e.dismissible:e,{name:"if",hash:{},fn:t.program(3,i,0),inverse:t.noop,data:i}))?r:"")+'\t<div style="position: relative; z-index: 2">\n\n'+(null!=(r=n.if.call(a,null!=e?e.hasTitle:e,{name:"if",hash:{},fn:t.program(5,i,0),inverse:t.noop,data:i}))?r:"")+'\n\t\t<div class="content" '+(null!=(r=n.if.call(a,null!=e?e.translate:e,{name:"if",hash:{},fn:t.program(8,i,0),inverse:t.noop,data:i}))?r:"")+">\n\t\t\t"+(null!=(r=n.unless.call(a,null!=e?e.translate:e,{name:"unless",hash:{},fn:t.program(10,i,0),inverse:t.noop,data:i}))?r:"")+"\n\t\t</div>\n\t</div>\n</div>\n"},useData:!0}),this.Handlebars.templates["Bs/View/Alert/Toast/toast"]=Handlebars.template({1:function(t,e,n,o,i){return" toast-dismissible"},3:function(t,e,n,o,i){return'\t<button style="position: relative; z-index: 2" type="button" class="close" data-dismiss="toast"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\n'},5:function(t,e,n,o,i){var r,s,a=null!=e?e:t.nullContext||{};return"\t\t\t<h4 "+(null!=(r=n.if.call(a,null!=e?e.translateTitle:e,{name:"if",hash:{},fn:t.program(6,i,0),inverse:t.noop,data:i}))?r:"")+">\n\t\t\t\t"+t.escapeExpression("function"==typeof(s=null!=(s=n.title||(null!=e?e.title:e))?s:n.helperMissing)?s.call(a,{name:"title",hash:{},data:i}):s)+"\n\t\t\t</h4><br>\n"},6:function(t,e,n,o,i){var r;return'data-i18n="'+t.escapeExpression("function"==typeof(r=null!=(r=n.title||(null!=e?e.title:e))?r:n.helperMissing)?r.call(null!=e?e:t.nullContext||{},{name:"title",hash:{},data:i}):r)+'"'},8:function(t,e,n,o,i){var r;return'data-i18n="'+t.escapeExpression("function"==typeof(r=null!=(r=n.msg||(null!=e?e.msg:e))?r:n.helperMissing)?r.call(null!=e?e:t.nullContext||{},{name:"msg",hash:{},data:i}):r)+'"'},10:function(t,e,n,o,i){var r,s;return null!=(r="function"==typeof(s=null!=(s=n.msg||(null!=e?e.msg:e))?s:n.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"msg",hash:{},data:i}):s)?r:""},compiler:[7,">= 4.0.0"],main:function(t,e,n,o,i){var r,s,a=null!=e?e:t.nullContext||{},l=n.helperMissing,u="function",p=t.escapeExpression;return'<div class="toast toast-'+p(typeof(s=null!=(s=n.type||(null!=e?e.type:e))?s:l)===u?s.call(a,{name:"type",hash:{},data:i}):s)+(null!=(r=n.if.call(a,null!=e?e.dismissible:e,{name:"if",hash:{},fn:t.program(1,i,0),inverse:t.noop,data:i}))?r:"")+'" role="alert">\n\t<div style="position: absolute;top: 0;bottom: 0;left: 0;right: 0;overflow: hidden;z-index:1">\n\t\t<i style="position: absolute;bottom: -30px;right:-30px;font-size:10em;opacity: .2;display:none" class="alert-icon '+p(typeof(s=null!=(s=n.icon||(null!=e?e.icon:e))?s:l)===u?s.call(a,{name:"icon",hash:{},data:i}):s)+" text-"+p(typeof(s=null!=(s=n.type||(null!=e?e.type:e))?s:l)===u?s.call(a,{name:"type",hash:{},data:i}):s)+'"></i>\n\t</div>\n'+(null!=(r=n.if.call(a,null!=e?e.dismissible:e,{name:"if",hash:{},fn:t.program(3,i,0),inverse:t.noop,data:i}))?r:"")+'\t<div style="position: relative; z-index: 2">\n\n'+(null!=(r=n.if.call(a,null!=e?e.hasTitle:e,{name:"if",hash:{},fn:t.program(5,i,0),inverse:t.noop,data:i}))?r:"")+'\n\t\t<div class="content" '+(null!=(r=n.if.call(a,null!=e?e.translate:e,{name:"if",hash:{},fn:t.program(8,i,0),inverse:t.noop,data:i}))?r:"")+">\n\t\t\t"+(null!=(r=n.unless.call(a,null!=e?e.translate:e,{name:"unless",hash:{},fn:t.program(10,i,0),inverse:t.noop,data:i}))?r:"")+"\n\t\t</div>\n\t</div>\n</div>\n"},useData:!0}),this.Handlebars.templates["Bs/View/Collection/Empty/empty"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,o,i){return'<div class="text-center text-muted">\n\t<div style="margin: 30px 0">\n\t\t<span class="fa fa-meh-o fa-5x" style="opacity: .4"></span>\n\t\t<div style="margin-top: 15px">\n\t\t\t<i data-i18n="nothingToDisplay"></i>\n\t\t</div>\n\n\t</div>\n</div>\n'},useData:!0}),this.Handlebars.templates["Bs/View/Collection/Error/error"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,o,i){return'<div class="text-center text-danger">\n\t<div style="margin: 30px 0">\n\t\t<span class="fa fa-warning fa-5x" style="opacity: .4"></span>\n\t\t<div style="margin-top: 15px">\n\t\t\t<i data-i18n="error"></i>\n\t\t</div>\n\t</div>\n</div>\n'},useData:!0}),this.Handlebars.templates["Bs/View/Loading/loading"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,o,i){var r,s;return'<div class="loading-spinner-outer">\n\t<div class="spinner">\n\t\t<div class="bounce1"></div>\n\t\t<div class="bounce2"></div>\n\t\t<div class="bounce3"></div>\n\t</div>\n</div>\n<div class="loading-text">'+(null!=(r="function"==typeof(s=null!=(s=n.text||(null!=e?e.text:e))?s:n.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"text",hash:{},data:i}):s)?r:"")+"</div>\n"},useData:!0}),this.Handlebars.templates["Bs/View/Modal/modal"]=Handlebars.template({1:function(t,e,n,o,i){return'\t\t\t\t\t\t<button type="button" class="close pull-right view-close" data-dismiss="modal"\n\t\t\t\t\t\t        aria-label="Close">\n\t\t\t\t\t\t\t<small class="text-uppercase" data-i18n="close"></small>\n\t\t\t\t\t\t\t<span class="fa fa-times-thin"></span>\n\t\t\t\t\t\t</button>\n'},3:function(t,e,n,o,i){return"no-padding"},compiler:[7,">= 4.0.0"],main:function(t,e,n,o,i){var r,s=null!=e?e:t.nullContext||{};return'<div class="modal fade">\n\t<div class="modal-dialog">\n\t\t<div class="modal-content">\n\t\t\t<div class="modal-header">\n\t\t\t\t<h4 class="modal-title text-primary">\n\t\t\t\t\t<span class="modal-title-main" data-i18n="title"></span>\n\t\t\t\t\t<small class="modal-title-sub" data-i18n="subTitle"></small>\n'+(null!=(r=n.if.call(s,null!=e?e.closable:e,{name:"if",hash:{},fn:t.program(1,i,0),inverse:t.noop,data:i}))?r:"")+'\t\t\t\t</h4>\n\t\t\t</div>\n\t\t\t<div class="modal-body '+(null!=(r=n.unless.call(s,null!=e?e.bodyPadding:e,{name:"unless",hash:{},fn:t.program(3,i,0),inverse:t.noop,data:i}))?r:"")+'">\n\t\t\t\t<div class="modal-icon-wrap">\n\t\t\t\t\t<i class="modal-icon text-primary"></i>\n\t\t\t\t</div>\n\t\t\t\t<div class="view-content" data-create></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'},useData:!0}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.i18next=e()}(this,function(){"use strict";function c(t){return null==t?"":""+t}function d(t,e,n){function o(t){return t&&-1<t.indexOf("###")?t.replace(/###/g,"."):t}function i(){return!t||"string"==typeof t}for(var r="string"!=typeof e?[].concat(e):e.split(".");1<r.length;){if(i())return{};var s=o(r.shift());!t[s]&&n&&(t[s]=new n),t=t[s]}return i()?{}:{obj:t,k:o(r.shift())}}function l(t,e,n){var o=d(t,e,Object);o.obj[o.k]=n}function f(t,e){var n=d(t,e),o=n.obj,i=n.k;if(o)return o[i]}function n(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function o(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,function(t){return s[t]}):t}function i(t){return t.charAt(0).toUpperCase()+t.slice(1)}function a(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.whitelist&&t.whitelist.indexOf("cimode")<0&&(t.whitelist=t.whitelist.concat(["cimode"])),t}function u(){}var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},E=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},t=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},g=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],o=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){i=!0,r=t}finally{try{!o&&a.return&&a.return()}finally{if(i)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){var n;console&&console[t]&&(n=console)[t].apply(n,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(e))}},y=new(function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};p(this,n),this.init(t,e)}return n.prototype.init=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||r,this.options=e,this.debug=e.debug},n.prototype.setDebug=function(t){this.debug=t},n.prototype.log=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)},n.prototype.warn=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)},n.prototype.error=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")},n.prototype.deprecate=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)},n.prototype.forward=function(t,e,n,o){return o&&!this.debug?null:("string"==typeof t[0]&&(t[0]=""+n+this.prefix+" "+t[0]),this.logger[e](t))},n.prototype.create=function(t){return new n(this.logger,E({prefix:this.prefix+":"+t+":"},this.options))},n}()),e=function(){function t(){p(this,t),this.observers={}}return t.prototype.on=function(t,e){var n=this;return t.split(" ").forEach(function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)}),this},t.prototype.off=function(e,n){var o=this;this.observers[e]&&this.observers[e].forEach(function(){if(n){var t=o.observers[e].indexOf(n);-1<t&&o.observers[e].splice(t,1)}else delete o.observers[e]})},t.prototype.emit=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];this.observers[e]&&[].concat(this.observers[e]).forEach(function(t){t.apply(void 0,n)});this.observers["*"]&&[].concat(this.observers["*"]).forEach(function(t){t.apply(t,[e].concat(n))})},t}(),s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},m=function(o){function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};p(this,i);var n=h(this,o.call(this));return n.data=t||{},n.options=e,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return t(i,o),i.prototype.addNamespaces=function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)},i.prototype.removeNamespaces=function(t){var e=this.options.ns.indexOf(t);-1<e&&this.options.ns.splice(e,1)},i.prototype.getResource=function(t,e,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator,r=[t,e];return n&&"string"!=typeof n&&(r=r.concat(n)),n&&"string"==typeof n&&(r=r.concat(i?n.split(i):n)),-1<t.indexOf(".")&&(r=t.split(".")),f(this.data,r)},i.prototype.addResource=function(t,e,n,o){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{silent:!1},r=this.options.keySeparator;void 0===r&&(r=".");var s=[t,e];n&&(s=s.concat(r?n.split(r):n)),-1<t.indexOf(".")&&(o=e,e=(s=t.split("."))[1]),this.addNamespaces(e),l(this.data,s,o),i.silent||this.emit("added",t,e,n,o)},i.prototype.addResources=function(t,e,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"==typeof n[i]&&this.addResource(t,e,i,n[i],{silent:!0});o.silent||this.emit("added",t,e,n)},i.prototype.addResourceBundle=function(t,e,n,o,i){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{silent:!1},s=[t,e];-1<t.indexOf(".")&&(o=n,n=e,e=(s=t.split("."))[1]),this.addNamespaces(e);var a=f(this.data,s)||{};o?function t(e,n,o){for(var i in n)i in e?"string"==typeof e[i]||e[i]instanceof String||"string"==typeof n[i]||n[i]instanceof String?o&&(e[i]=n[i]):t(e[i],n[i],o):e[i]=n[i];return e}(a,n,i):a=E({},a,n),l(this.data,s,a),r.silent||this.emit("added",t,e,n)},i.prototype.removeResourceBundle=function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)},i.prototype.hasResourceBundle=function(t,e){return void 0!==this.getResource(t,e)},i.prototype.getResourceBundle=function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?E({},this.getResource(t,e)):this.getResource(t,e)},i.prototype.getDataByLanguage=function(t){return this.data[t]},i.prototype.toJSON=function(){return this.data},i}(e),v={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,o,i){var r=this;return t.forEach(function(t){r.processors[t]&&(e=r.processors[t].process(e,n,o,i))}),e}},w=function(r){function s(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};p(this,s);var n,o,i=h(this,r.call(this));return n=t,o=i,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat"].forEach(function(t){n[t]&&(o[t]=n[t])}),i.options=e,void 0===i.options.keySeparator&&(i.options.keySeparator="."),i.logger=y.create("translator"),i}return t(s,r),s.prototype.changeLanguage=function(t){t&&(this.language=t)},s.prototype.exists=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(t,e);return n&&void 0!==n.res},s.prototype.extractFromKey=function(t,e){var n=e.nsSeparator||this.options.nsSeparator;void 0===n&&(n=":");var o=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,i=e.ns||this.options.defaultNS;if(n&&-1<t.indexOf(n)){var r=t.split(n);(n!==o||n===o&&-1<this.options.ns.indexOf(r[0]))&&(i=r.shift()),t=r.join(o)}return"string"==typeof i&&(i=[i]),{key:t,namespaces:i}},s.prototype.translate=function(t,n){var o=this;if("object"!==(void 0===n?"undefined":T(n))&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==t||""===t)return"";"number"==typeof t&&(t=String(t)),"string"==typeof t&&(t=[t]);var e=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,i=this.extractFromKey(t[t.length-1],n),r=i.key,s=i.namespaces,a=s[s.length-1],l=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(u){var p=n.nsSeparator||this.options.nsSeparator;return a+p+r}return r}var c=this.resolve(t,n),d=c&&c.res,f=c&&c.usedKey||r,h=Object.prototype.toString.apply(d),g=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject;if(y&&d&&("string"!=typeof d&&"boolean"!=typeof d&&"number"!=typeof d)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(h)<0&&(!g||"[object Array]"!==h)){if(!n.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,d,n):"key '"+r+" ("+this.language+")' returned an object instead of string.";if(e){var m="[object Array]"===h?[]:{};for(var v in d)if(Object.prototype.hasOwnProperty.call(d,v)){var w=""+f+e+v;m[v]=this.translate(w,E({},n,{joinArrays:!1,ns:s})),m[v]===w&&(m[v]=d[v])}d=m}}else if(y&&g&&"[object Array]"===h)(d=d.join(g))&&(d=this.extendTranslation(d,t,n));else{var b=!1,x=!1;if(!this.isValidLookup(d)&&void 0!==n.defaultValue){if(b=!0,void 0!==n.count){var P=this.pluralResolver.getSuffix(l,n.count);d=n["defaultValue"+P]}d||(d=n.defaultValue)}this.isValidLookup(d)||(x=!0,d=r);var B=n.defaultValue&&n.defaultValue!==d&&this.options.updateMissing;if(x||b||B){this.logger.log(B?"updateKey":"missingKey",l,a,r,B?n.defaultValue:d);var C=[],O=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&O&&O[0])for(var k=0;k<O.length;k++)C.push(O[k]);else"all"===this.options.saveMissingTo?C=this.languageUtils.toResolveHierarchy(n.lng||this.language):C.push(n.lng||this.language);var A=function(t,e){o.options.missingKeyHandler?o.options.missingKeyHandler(t,a,e,B?n.defaultValue:d,B,n):o.backendConnector&&o.backendConnector.saveMissing&&o.backendConnector.saveMissing(t,a,e,B?n.defaultValue:d,B,n),o.emit("missingKey",t,a,e,d)};if(this.options.saveMissing){var S=void 0!==n.count&&"string"!=typeof n.count;this.options.saveMissingPlurals&&S?C.forEach(function(e){o.pluralResolver.getPluralFormsOfKey(e,r).forEach(function(t){return A([e],t)})}):A(C,r)}}d=this.extendTranslation(d,t,n,c),x&&d===r&&this.options.appendNamespaceToMissingKey&&(d=a+":"+r),x&&this.options.parseMissingKeyHandler&&(d=this.options.parseMissingKeyHandler(d))}return d},s.prototype.extendTranslation=function(t,e,n,o){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,n,o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(E({},n,{interpolation:E({},this.options.interpolation,n.interpolation)}));var r=n.replace&&"string"!=typeof n.replace?n.replace:n;this.options.interpolation.defaultVariables&&(r=E({},this.options.interpolation.defaultVariables,r)),t=this.interpolator.interpolate(t,r,n.lng||this.language,n),!1!==n.nest&&(t=this.interpolator.nest(t,function(){return i.translate.apply(i,arguments)},n)),n.interpolation&&this.interpolator.reset()}var s=n.postProcess||this.options.postProcess,a="string"==typeof s?[s]:s;return null!=t&&a&&a.length&&!1!==n.applyPostProcessor&&(t=v.handle(a,t,e,n,this)),t},s.prototype.resolve=function(t){var u=this,p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=void 0,i=void 0,d=void 0,f=void 0;return"string"==typeof t&&(t=[t]),t.forEach(function(t){if(!u.isValidLookup(c)){var e=u.extractFromKey(t,p),s=e.key;i=s;var n=e.namespaces;u.options.fallbackNS&&(n=n.concat(u.options.fallbackNS));var a=void 0!==p.count&&"string"!=typeof p.count,l=void 0!==p.context&&"string"==typeof p.context&&""!==p.context,o=p.lngs?p.lngs:u.languageUtils.toResolveHierarchy(p.lng||u.language,p.fallbackLng);n.forEach(function(r){u.isValidLookup(c)||(f=r,o.forEach(function(t){if(!u.isValidLookup(c)){d=t;var e=s,n=[e];if(u.i18nFormat&&u.i18nFormat.addLookupKeys)u.i18nFormat.addLookupKeys(n,s,t,r,p);else{var o=void 0;a&&(o=u.pluralResolver.getSuffix(t,p.count)),a&&l&&n.push(e+o),l&&n.push(e+=""+u.options.contextSeparator+p.context),a&&n.push(e+=o)}for(var i=void 0;i=n.pop();)u.isValidLookup(c)||(c=u.getResource(t,r,i,p))}}))})}}),{res:c,usedKey:i,usedLng:d,usedNS:f}},s.prototype.isValidLookup=function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)},s.prototype.getResource=function(t,e,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,o):this.resourceStore.getResource(t,e,n,o)},s}(e),b=function(){function e(t){p(this,e),this.options=t,this.whitelist=this.options.whitelist||!1,this.logger=y.create("languageUtils")}return e.prototype.getScriptPartFromCode=function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),this.formatLanguageCode(e.join("-")))},e.prototype.getLanguagePartFromCode=function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])},e.prototype.formatLanguageCode=function(t){if("string"==typeof t&&-1<t.indexOf("-")){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map(function(t){return t.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),-1<e.indexOf(n[1].toLowerCase())&&(n[1]=i(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),-1<e.indexOf(n[1].toLowerCase())&&(n[1]=i(n[1].toLowerCase())),-1<e.indexOf(n[2].toLowerCase())&&(n[2]=i(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t},e.prototype.isWhitelisted=function(t){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(t=this.getLanguagePartFromCode(t)),!this.whitelist||!this.whitelist.length||-1<this.whitelist.indexOf(t)},e.prototype.getFallbackCodes=function(t,e){if(!t)return[];if("string"==typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t.default),n||[]},e.prototype.toResolveHierarchy=function(t,e){var n=this,o=this.getFallbackCodes(e||this.options.fallbackLng||[],t),i=[],r=function(t){t&&(n.isWhitelisted(t)?i.push(t):n.logger.warn("rejecting non-whitelisted language code: "+t))};return"string"==typeof t&&-1<t.indexOf("-")?("languageOnly"!==this.options.load&&r(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&r(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&r(this.getLanguagePartFromCode(t))):"string"==typeof t&&r(this.formatLanguageCode(t)),o.forEach(function(t){i.indexOf(t)<0&&r(n.formatLanguageCode(t))}),i},e}(),x=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he"],nr:[1,2,20,21],fc:22}],P={1:function(t){return Number(1<t)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?1:2)},5:function(t){return Number(0===t?0:1==t?1:2==t?2:3<=t%100&&t%100<=10?3:11<=t%100?4:5)},6:function(t){return Number(1==t?0:2<=t&&t<=4?1:2)},7:function(t){return Number(1==t?0:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(2<=t)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:2<t&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:2<=t%10&&(t%100<10||20<=t%100)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0===t||1<t%100&&t%100<11?1:10<t%100&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0===t||0<t%100&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1===t?0:2===t?1:(t<0||10<t)&&t%10==0?2:3)}},B=function(){function o(t){var n,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};p(this,o),this.languageUtils=t,this.options=e,this.logger=y.create("pluralResolver"),this.rules=(n={},x.forEach(function(e){e.lngs.forEach(function(t){n[t]={numbers:e.nr,plurals:P[e.fc]}})}),n)}return o.prototype.addRule=function(t,e){this.rules[t]=e},o.prototype.getRule=function(t){return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]},o.prototype.needsPlural=function(t){var e=this.getRule(t);return e&&1<e.numbers.length},o.prototype.getPluralFormsOfKey=function(n,o){var i=this,r=[],t=this.getRule(n);return t&&t.numbers.forEach(function(t){var e=i.getSuffix(n,t);r.push(""+o+e)}),r},o.prototype.getSuffix=function(t,e){var n=this,o=this.getRule(t);if(o){var i=o.noAbs?o.plurals(e):o.plurals(Math.abs(e)),r=o.numbers[i];this.options.simplifyPluralSuffix&&2===o.numbers.length&&1===o.numbers[0]&&(2===r?r="plural":1===r&&(r=""));var s=function(){return n.options.prepend&&r.toString()?n.options.prepend+r.toString():r.toString()};return"v1"===this.options.compatibilityJSON?1===r?"":"number"==typeof r?"_plural_"+r.toString():s():"v2"===this.options.compatibilityJSON&&2===o.numbers.length&&1===o.numbers[0]?s():this.options.simplifyPluralSuffix&&2===o.numbers.length&&1===o.numbers[0]?s():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: "+t),""},o}(),C=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};p(this,e),this.logger=y.create("interpolator"),this.init(t,!0)}return e.prototype.init=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};arguments[1]&&(this.options=t,this.format=t.interpolation&&t.interpolation.format||function(t){return t}),t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escape=void 0!==e.escape?e.escape:o,this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.useRawValueToEscape=void 0!==e.useRawValueToEscape&&e.useRawValueToEscape,this.prefix=e.prefix?n(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?n(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?n(e.nestingPrefix):e.nestingPrefixEscaped||n("$t("),this.nestingSuffix=e.nestingSuffix?n(e.nestingSuffix):e.nestingSuffixEscaped||n(")"),this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.resetRegExp()},e.prototype.reset=function(){this.options&&this.init(this.options)},e.prototype.resetRegExp=function(){var t=this.prefix+"(.+?)"+this.suffix;this.regexp=new RegExp(t,"g");var e=""+this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(e,"g");var n=this.nestingPrefix+"(.+?)"+this.nestingSuffix;this.nestingRegexp=new RegExp(n,"g")},e.prototype.interpolate=function(t,i,r,e){var s=this,n=void 0,o=void 0,a=void 0,l=function(t){if(t.indexOf(s.formatSeparator)<0)return f(i,t);var e=t.split(s.formatSeparator),n=e.shift().trim(),o=e.join(s.formatSeparator).trim();return s.format(f(i,n),o,r)};this.resetRegExp();var u=e&&e.missingInterpolationHandler||this.options.missingInterpolationHandler;for(a=0;(n=this.regexpUnescape.exec(t))&&(o=l(n[1].trim()),t=t.replace(n[0],o),this.regexpUnescape.lastIndex=0,!(++a>=this.maxReplaces)););for(a=0;n=this.regexp.exec(t);){if(void 0===(o=l(n[1].trim())))if("function"==typeof u){var p=u(t,n);o="string"==typeof p?p:""}else this.logger.warn("missed to pass in variable "+n[1]+" for interpolating "+t),o="";else"string"==typeof o||this.useRawValueToEscape||(o=c(o));if(o=(this.escapeValue?this.escape(o):o).replace(/\$/g,"$$$$"),t=t.replace(n[0],o),this.regexp.lastIndex=0,++a>=this.maxReplaces)break}return t},e.prototype.nest=function(t,e){function n(t,e){if(t.indexOf(",")<0)return t;var n=t.split(",");t=n.shift();var o=n.join(",");o=(o=this.interpolate(o,s)).replace(/'/g,'"');try{s=JSON.parse(o),e&&(s=E({},e,s))}catch(e){this.logger.error("failed parsing options string in nesting for key "+t,e)}return t}var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=void 0,r=void 0,s=E({},o);for(s.applyPostProcessor=!1;i=this.nestingRegexp.exec(t);){if((r=e(n.call(this,i[1].trim(),s),s))&&i[0]===t&&"string"!=typeof r)return r;"string"!=typeof r&&(r=c(r)),r||(this.logger.warn("missed to resolve "+i[1]+" for nesting "+t),r=""),t=t.replace(i[0],r),this.regexp.lastIndex=0}return t},e}(),O=function(r){function s(t,e,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};p(this,s);var i=h(this,r.call(this));return i.backend=t,i.store=e,i.languageUtils=n.languageUtils,i.options=o,i.logger=y.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(n,o.backend,o),i}return t(s,r),s.prototype.queueLoad=function(t,e,i,n){var r=this,s=[],a=[],l=[],u=[];return t.forEach(function(n){var o=!0;e.forEach(function(t){var e=n+"|"+t;!i.reload&&r.store.hasResourceBundle(n,t)?r.state[e]=2:r.state[e]<0||(1===r.state[e]?a.indexOf(e)<0&&a.push(e):(r.state[e]=1,o=!1,a.indexOf(e)<0&&a.push(e),s.indexOf(e)<0&&s.push(e),u.indexOf(t)<0&&u.push(t)))}),o||l.push(n)}),(s.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:n}),{toLoad:s,pending:a,toLoadLanguages:l,toLoadNamespaces:u}},s.prototype.loaded=function(a,l,t){var e=a.split("|"),n=g(e,2),u=n[0],p=n[1];l&&this.emit("failedLoading",u,p,l),t&&this.store.addResourceBundle(u,p,t),this.state[a]=l?-1:2;var c={};this.queue.forEach(function(t){var e,n,o,i,r,s;e=t.loaded,n=p,i=d(e,[u],Object),r=i.obj,s=i.k,r[s]=r[s]||[],o&&(r[s]=r[s].concat(n)),o||r[s].push(n),function(t,e){for(var n=t.indexOf(e);-1!==n;)t.splice(n,1),n=t.indexOf(e)}(t.pending,a),l&&t.errors.push(l),0!==t.pending.length||t.done||(Object.keys(t.loaded).forEach(function(e){c[e]||(c[e]=[]),t.loaded[e].length&&t.loaded[e].forEach(function(t){c[e].indexOf(t)<0&&c[e].push(t)})}),t.done=!0,t.errors.length?t.callback(t.errors):t.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(function(t){return!t.done})},s.prototype.read=function(n,o,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,s=this,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:250,l=arguments[5];return n.length?this.backend[i](n,o,function(t,e){return t&&e&&r<5?void setTimeout(function(){s.read.call(s,n,o,i,r+1,2*a,l)},a):void l(t,e)}):l(null,{})},s.prototype.prepareLoading=function(t,e){var n=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3];if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var r=this.queueLoad(t,e,o,i);return r.toLoad.length?void r.toLoad.forEach(function(t){n.loadOne(t)}):(r.pending.length||i(),null)},s.prototype.load=function(t,e,n){this.prepareLoading(t,e,{},n)},s.prototype.reload=function(t,e,n){this.prepareLoading(t,e,{reload:!0},n)},s.prototype.loadOne=function(n){var o=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",t=n.split("|"),e=g(t,2),r=e[0],s=e[1];this.read(r,s,"read",null,null,function(t,e){t&&o.logger.warn(i+"loading namespace "+s+" for language "+r+" failed",t),!t&&e&&o.logger.log(i+"loaded namespace "+s+" for language "+r,e),o.loaded(n,t,e)})},s.prototype.saveMissing=function(t,e,n,o,i){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{};this.backend&&this.backend.create&&this.backend.create(t,e,n,o,null,E({},r,{isUpdate:i})),t&&t[0]&&this.store.addResource(t[0],e,n,o)},s}(e);return new(function(i){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];p(this,r);var n=h(this,i.call(this));if(n.options=a(t),n.services={},n.logger=y,n.modules={external:[]},e&&!n.isInitialized&&!t.isClone){var o;if(!n.options.initImmediate)return o=n.init(t,e),h(n,o);setTimeout(function(){n.init(t,e)},0)}return n}return t(r,i),r.prototype.init=function(){function t(t){return t?"function"==typeof t?new t:t:null}var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];if("function"==typeof e&&(n=e,e={}),this.options=E({},{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};return t[1]&&(e.defaultValue=t[1]),t[2]&&(e.tDescription=t[2]),e},interpolation:{escapeValue:!0,format:function(t,e,n){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",maxReplaces:1e3}},this.options,a(e)),this.format=this.options.interpolation.format,n||(n=u),!this.options.isClone){this.modules.logger?y.init(t(this.modules.logger),this.options):y.init(null,this.options);var o=new b(this.options);this.store=new m(this.options.resources,this.options);var r=this.services;r.logger=y,r.resourceStore=this.store,r.languageUtils=o,r.pluralResolver=new B(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),r.interpolator=new C(this.options),r.backendConnector=new O(t(this.modules.backend),r.resourceStore,r,this.options),r.backendConnector.on("*",function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];i.emit.apply(i,[t].concat(n))}),this.modules.languageDetector&&(r.languageDetector=t(this.modules.languageDetector),r.languageDetector.init(r,this.options.detection,this.options)),this.modules.i18nFormat&&(r.i18nFormat=t(this.modules.i18nFormat),r.i18nFormat.init&&r.i18nFormat.init(this)),this.translator=new w(this.services,this.options),this.translator.on("*",function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];i.emit.apply(i,[t].concat(n))}),this.modules.external.forEach(function(t){t.init&&t.init(i)})}["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(function(e){i[e]=function(){var t;return(t=i.store)[e].apply(t,arguments)}});var s=function(){i.changeLanguage(i.options.lng,function(t,e){i.isInitialized=!0,i.logger.log("initialized",i.options),i.emit("initialized",i.options),n(t,e)})};return this.options.resources||!this.options.initImmediate?s():setTimeout(s,0),this},r.prototype.loadResources=function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:u;if(!this.options.resources||this.options.partialBundledLanguages){if(this.language&&"cimode"===this.language.toLowerCase())return t();var n=[],o=function(t){t&&e.services.languageUtils.toResolveHierarchy(t).forEach(function(t){n.indexOf(t)<0&&n.push(t)})};if(this.language)o(this.language);else this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(function(t){return o(t)});this.options.preload&&this.options.preload.forEach(function(t){return o(t)}),this.services.backendConnector.load(n,this.options.ns,t)}else t(null)},r.prototype.reloadResources=function(t,e,n){t||(t=this.languages),e||(e=this.options.ns),n||(n=function(){}),this.services.backendConnector.reload(t,e,n)},r.prototype.use=function(t){return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&v.addPostProcessor(t),"3rdParty"===t.type&&this.modules.external.push(t),this},r.prototype.changeLanguage=function(t,i){var r=this,e=function(o){o&&(r.language=o,r.languages=r.services.languageUtils.toResolveHierarchy(o),r.translator.language||r.translator.changeLanguage(o),r.services.languageDetector&&r.services.languageDetector.cacheUserLanguage(o)),r.loadResources(function(t){var e,n;e=t,n=o,r.translator.changeLanguage(n),n&&(r.emit("languageChanged",n),r.logger.log("languageChanged",n)),i&&i(e,function(){return r.t.apply(r,arguments)})})};t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(e):e(t):e(this.services.languageDetector.detect())},r.prototype.getFixedT=function(t,e){var a=this,n=function t(e,n){for(var o=arguments.length,i=Array(2<o?o-2:0),r=2;r<o;r++)i[r-2]=arguments[r];var s=E({},n);return"object"!==(void 0===n?"undefined":T(n))&&(s=a.options.overloadTranslationOptionHandler([e,n].concat(i))),s.lng=s.lng||t.lng,s.lngs=s.lngs||t.lngs,s.ns=s.ns||t.ns,a.t(e,s)};return"string"==typeof t?n.lng=t:n.lngs=t,n.ns=e,n},r.prototype.t=function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)},r.prototype.exists=function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)},r.prototype.setDefaultNamespace=function(t){this.options.defaultNS=t},r.prototype.loadNamespaces=function(t,e){var n=this;return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach(function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)}),void this.loadResources(e)):e&&e()},r.prototype.loadLanguages=function(t,e){"string"==typeof t&&(t=[t]);var n=this.options.preload||[],o=t.filter(function(t){return n.indexOf(t)<0});return o.length?(this.options.preload=n.concat(o),void this.loadResources(e)):e()},r.prototype.dir=function(t){if(t||(t=this.languages&&0<this.languages.length?this.languages[0]:this.language),!t)return"rtl";return 0<=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))?"rtl":"ltr"},r.prototype.createInstance=function(){return new r(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},arguments[1])},r.prototype.cloneInstance=function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:u,o=E({},this.options,t,{isClone:!0}),i=new r(o);return["store","services","language"].forEach(function(t){i[t]=e[t]}),i.translator=new w(i.services,i.options),i.translator.on("*",function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];i.emit.apply(i,[t].concat(n))}),i.init(o,n),i.translator.options=i.options,i},r}(e))}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.jqueryI18next=e()}(this,function(){"use strict";var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},t={tName:"t",i18nName:"i18n",handleName:"localize",selectorAttr:"data-i18n",targetAttr:"i18n-target",optionsAttr:"i18n-options",useOptionsAttr:!1,parseDefaultValueFromContent:!0};return{init:function(l,a){var u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};function p(t,e,n){if(0!==e.length){var o="text";if(0===e.indexOf("[")){var i=e.split("]");e=i[1],o=i[0].substr(1,i[0].length-1)}if(e.indexOf(";")===e.length-1&&(e=e.substr(0,e.length-2)),"html"===o)t.html(l.t(e,a(n,t.html())));else if("text"===o)t.text(l.t(e,a(n,t.text())));else if("prepend"===o)t.prepend(l.t(e,a(n,t.html())));else if("append"===o)t.append(l.t(e,a(n,t.html())));else if(0===o.indexOf("data-")){var r=o.substr("data-".length),s=l.t(e,a(n,t.data(r)));t.data(r,s),t.attr(o,s)}else t.attr(o,l.t(e,a(n,t.attr(o))))}function a(t,e){return u.parseDefaultValueFromContent?c({},t,{defaultValue:e}):t}}function e(t,n){var e=t.attr(u.selectorAttr);if(e||void 0===e||!1===e||(e=t.text()||t.val()),e){var o=t,i=t.data(u.targetAttr);if(i&&(o=t.find(i)||t),n||!0!==u.useOptionsAttr||(n=t.data(u.optionsAttr)),n=n||{},0<=e.indexOf(";")){var r=e.split(";");a.each(r,function(t,e){""!==e&&p(o,e.trim(),n)})}else p(o,e,n);if(!0===u.useOptionsAttr){var s={};delete(s=c({clone:s},n)).lng,t.data(u.optionsAttr,s)}}}u=c({},t,u),a[u.tName]=l.t.bind(l),a[u.i18nName]=l,a.fn[u.handleName]=function(t){return this.each(function(){e(a(this),t),a(this).find("["+u.selectorAttr+"]").each(function(){e(a(this),t)})})}}}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.i18nextXHRBackend=e()}(this,function(){"use strict";var t=[],o=t.forEach,i=t.slice;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function u(t,e){if(e&&"object"===(void 0===e?"undefined":l(e))){var n="",o=encodeURIComponent;for(var i in e)n+="&"+o(i)+"="+o(e[i]);if(!n)return t;t=t+(-1!==t.indexOf("?")?"&":"?")+n.slice(1)}return t}function r(t,e,n,o,i){o&&"object"===(void 0===o?"undefined":l(o))&&(i||(o._t=new Date),o=u("",o).slice(1)),e.queryStringParams&&(t=u(t,e.queryStringParams));try{var r;(r=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0")).open(o?"POST":"GET",t,1),e.crossDomain||r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.withCredentials=!!e.withCredentials,o&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.overrideMimeType&&r.overrideMimeType("application/json");var s=e.customHeaders;if(s)for(var a in s)r.setRequestHeader(a,s[a]);r.onreadystatechange=function(){3<r.readyState&&n&&n(r.responseText,r)},r.send(o)}catch(t){console&&console.log(t)}}var e=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();var n=function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.init(t,e),this.type="backend"}return e(n,[{key:"init",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.services=t,this.options=function(n){return o.call(i.call(arguments,1),function(t){if(t)for(var e in t)void 0===n[e]&&(n[e]=t[e])}),n}(e,this.options||{},{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:r})}},{key:"readMulti",value:function(t,e,n){var o=this.options.loadPath;"function"==typeof this.options.loadPath&&(o=this.options.loadPath(t,e));var i=this.services.interpolator.interpolate(o,{lng:t.join("+"),ns:e.join("+")});this.loadUrl(i,n)}},{key:"read",value:function(t,e,n){var o=this.options.loadPath;"function"==typeof this.options.loadPath&&(o=this.options.loadPath([t],[e]));var i=this.services.interpolator.interpolate(o,{lng:t,ns:e});this.loadUrl(i,n)}},{key:"loadUrl",value:function(i,r){var s=this;this.options.ajax(i,this.options,function(t,e){if(500<=e.status&&e.status<600)return r("failed loading "+i,!0);if(400<=e.status&&e.status<500)return r("failed loading "+i,!1);var n=void 0,o=void 0;try{n=s.options.parse(t,i)}catch(t){o="failed parsing "+i+" to json"}if(o)return r(o,!1);r(null,n)})}},{key:"create",value:function(t,n,e,o){var i=this;"string"==typeof t&&(t=[t]);var r={};r[e]=o||"",t.forEach(function(t){var e=i.services.interpolator.interpolate(i.options.addPath,{lng:t,ns:n});i.options.ajax(e,i.options,function(t,e){},r)})}}]),n}();return n.type="backend",n}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.i18nextBrowserLanguageDetector=e()}(this,function(){"use strict";var t=[],o=t.forEach,i=t.slice;var n=function(t,e,n,o){var i=void 0;if(n){var r=new Date;r.setTime(r.getTime()+60*n*1e3),i="; expires="+r.toGMTString()}else i="";o=o?"domain="+o+";":"",document.cookie=t+"="+e+i+";"+o+"path=/"},r=function(t){for(var e=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var i=n[o];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(e))return i.substring(e.length,i.length)}return null},s={name:"cookie",lookup:function(t){var e=void 0;if(t.lookupCookie&&"undefined"!=typeof document){var n=r(t.lookupCookie);n&&(e=n)}return e},cacheUserLanguage:function(t,e){e.lookupCookie&&"undefined"!=typeof document&&n(e.lookupCookie,t,e.cookieMinutes,e.cookieDomain)}},a={name:"querystring",lookup:function(t){var e=void 0;if("undefined"!=typeof window)for(var n=window.location.search.substring(1).split("&"),o=0;o<n.length;o++){var i=n[o].indexOf("=");if(0<i)n[o].substring(0,i)===t.lookupQuerystring&&(e=n[o].substring(i+1))}return e}},l=void 0;try{l="undefined"!==window&&null!==window.localStorage;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(t){l=!1}var u={name:"localStorage",lookup:function(t){var e=void 0;if(t.lookupLocalStorage&&l){var n=window.localStorage.getItem(t.lookupLocalStorage);n&&(e=n)}return e},cacheUserLanguage:function(t,e){e.lookupLocalStorage&&l&&window.localStorage.setItem(e.lookupLocalStorage,t)}},p={name:"navigator",lookup:function(t){var e=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)e.push(navigator.languages[n]);navigator.userLanguage&&e.push(navigator.userLanguage),navigator.language&&e.push(navigator.language)}return 0<e.length?e:void 0}},c={name:"htmlTag",lookup:function(t){var e=void 0,n=t.htmlTag||("undefined"!=typeof document?document.documentElement:null);return n&&"function"==typeof n.getAttribute&&(e=n.getAttribute("lang")),e}},d={name:"path",lookup:function(t){var e=void 0;if("undefined"!=typeof window){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if("number"==typeof t.lookupFromPathIndex){if("string"!=typeof n[t.lookupFromPathIndex])return;e=n[t.lookupFromPathIndex].replace("/","")}else e=n[0].replace("/","")}return e}},f={name:"subdomain",lookup:function(t){var e=void 0;if("undefined"!=typeof window){var n=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);n instanceof Array&&(e="number"==typeof t.lookupFromSubdomainIndex?n[t.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n[0].replace("http://","").replace("https://","").replace(".",""))}return e}},h=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}();var g=function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.type="languageDetector",this.detectors={},this.init(t,e)}return h(n,[{key:"init",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.services=t,this.options=function(n){return o.call(i.call(arguments,1),function(t){if(t)for(var e in t)void 0===n[e]&&(n[e]=t[e])}),n}(e,this.options||{},{order:["querystring","cookie","localStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(s),this.addDetector(a),this.addDetector(u),this.addDetector(p),this.addDetector(c),this.addDetector(d),this.addDetector(f)}},{key:"addDetector",value:function(t){this.detectors[t.name]=t}},{key:"detect",value:function(t){var n=this;t||(t=this.options.order);var o=[];t.forEach(function(t){if(n.detectors[t]){var e=n.detectors[t].lookup(n.options);e&&"string"==typeof e&&(e=[e]),e&&(o=o.concat(e))}});var i=void 0;if(o.forEach(function(t){if(!i){var e=n.services.languageUtils.formatLanguageCode(t);n.services.languageUtils.isWhitelisted(e)&&(i=e)}}),!i){var e=this.i18nOptions.fallbackLng;"string"==typeof e&&(e=[e]),e||(e=[]),i="[object Array]"===Object.prototype.toString.apply(e)?e[0]:e[0]||e.default&&e.default[0]}return i}},{key:"cacheUserLanguage",value:function(e,t){var n=this;t||(t=this.options.caches),t&&(this.options.excludeCacheFor&&-1<this.options.excludeCacheFor.indexOf(e)||t.forEach(function(t){n.detectors[t]&&n.detectors[t].cacheUserLanguage(e,n.options)}))}}]),n}();return g.type="languageDetector",g}),function(p){"use strict";window.console||(window.console={},window.console.log=function(){},window.console.warn=function(){},window.console.error=function(){},window.console.info=function(){}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){for(var n=e||0,o=this.length;n<o;n++)if(this[n]===t)return n;return-1});var l=!1,c={async:function(t){return l=t,this},isAsync:function(){return l},init:function(t){n=new p.Deferred,this.setConfig(t),p(function(){l=!0,n.resolve()})},ready:function(t){null!==n?p.when(n).then(function(){t()}):console.error("Bs has not been initialized. Please call Bs.init()")},setConfig:function(t){p.extend(d,t),c.setDebug(d.debug),d.dev&&c.setDev(!0)},setDebug:function(t){d.debug=t,c._overriddenClasses=t?(c._dependenciesLoaded=a,c._store=f,c._storeLib=u,c._dependencies=h,s):(c._dependenciesLoaded=void 0,c._store=void 0,c._storeLib=void 0,c._dependencies=void 0,null)},requirePackage:function(t,e,n){var i,r,o=[];if("function"==typeof e&&(n=e,e=[]),"string"==typeof e&&(e=[e]),n=n||function(){},c.isDev())e.length?c.require(e,n):n();else{"string"==typeof t&&(t=[t]),l=!1;for(var s,a=0;s=t[a];a++)i=v(d.urlDist+"/"+s+".min.js"),function(o){i.fail(function(t,e,n){throw console.error('Error in "'+o+'" package JS : '+e),n})}(s),o.push(i),r=c.Stylesheet.load(d.urlDist+"/"+s+".min.css"),function(o){r.fail(function(t,e,n){throw console.error('Error in "'+o+'" package CSS: '+e),n})}(s),o.push(r);p.when.apply(p,o).then(function(){l=!0,n()})}},require:function(t,e){var n;return"string"==typeof t&&(t=[t]),e=e||function(){},t.length?(y.push(new p.Deferred),0===(n=y.length-1)?o(t,e,n):p.when(y[n-1]).then(function(){o(t,e,n)})):e.apply(null,[]),c}},o=function(t,e,n){var o=[];a[n]=new p.Deferred,h={};for(var i,r=0;i=t[r];r++)s.hasOwnProperty(i)&&(i=s[i]),x(i),function(e){o.push(function(t){return c.create(e,t)})}(i);P(n),p.when(a[n]).then(function(){y[n].resolve(),y[n]=null,A(t.join(", ")+" READY"),e.apply(null,o)})};c.define=function(i,e,r){if(r=r||function(){},!l)return V(i,e),void r(f[i]);var t,n,o;if(A(i+" is being defined, check for dependencies"),(e=p.extend({},O,e)).require=S(e.require),n=function(n){var t,e=0,o=0,i=new p.Deferred;for(t in n)n.hasOwnProperty(t)&&(u.hasOwnProperty(t)?delete n[t]:e++);if(0===e)i.resolve();else for(t in i.progress(function(){++o===e&&i.resolve()}),n)n.hasOwnProperty(t)&&function(t){var e=d.urlApp+"/"+n[t];v(e).done(function(){u[t]=!0,i.notify()}).fail(function(){throw new Error("[Bs] Required lib "+t+" at "+e+" not found or error during JS eval.")})}(t);return i}(e.requireLib),t=e.require,e.extend&&(t=c.Util.arrayUnion(t,[e.extend])),(o=k(t)).length){A(o+" dependencies found for "+i);for(var s,a=0;s=o[a];a++)x(s,null,i)}else C(i),h[i].dfdRequire.resolve(),A("No dependency found for "+i);p.when(h[i].dfdRequire,n).then(function(){if(A("All dependencies have been loaded for "+i),e.extend){var t=new p.Deferred;f[e.extend]?t.resolve():b(e.extend,t),p.when(t).then(function(){f[e.extend].define(i,e,function(t,e){if(e&&e.length){for(var n,o=0;n=e[o];o++)h.hasOwnProperty(n)||x(n);p.when(h[i].dfdRequire).then(function(){T(t,i,r),h[i].dfdDefine.resolve(),r(f[i])})}else T(t,i,r),h[i].dfdDefine.resolve(),r(f[i])})})}else T(e,i,r),h[i].dfdDefine.resolve(),r(f[i])})},c.create=function(t,e){if(!1===m(t))throw new Error('Unable to create "'+t+'" not previously loaded, use "Bs.require()" before');return s.hasOwnProperty(t)&&(t=s[t]),w(t),delete h[t],"function"==typeof f[t]?new f[t](e):f[t]},c.override=function(t,e){s[t]=e},c.unload=function(t){delete f[t]},c.getConfig=function(t){return t?d.hasOwnProperty(t)?d[t]:null:d},c.isDebug=function(){return d.debug},c.storeCmp=function(t){i[t.id]=t},c.getCmp=function(t,e,n){return i.hasOwnProperty(t)?((e=e||function(){}).call(i[t],i[t]),i[t]):((n=n||function(){})(),null)},c.hasCmp=function(t){return i.hasOwnProperty(t)},c.removeCmp=function(t){i.hasOwnProperty(t)&&delete i[t]},c.register=function(t,e,n){return r(t,e,n)},c.getClass=function(t){return f[t]},c.isDev=function(){return e},c.setDev=function(t){return console.log(t?"%c .:Bs DEV MODE:. ":" %cDEV MODE OFF",(t?"color: #00ff00":"color: #ff0000")+";background: #333;font-size:2em;border:3px solid #00ff00;"),e=t,this};var e=!(c.Util={arrayUnion:function(t,e){"object"!=typeof t&&(t=[]),"object"!=typeof e&&(e=[]);var n={},o=[];return p.each(p.merge(p.merge([],t),e),function(t,e){n[e]=e}),p.each(n,function(t){o.push(t)}),o},arrayFromString:function(t){return"string"==typeof t?[t]:t},addPrefixIfMissing:function(t,e){return-1===e.indexOf(t)?t+"."+e:e},String:{ucfirst:function(t){return(t+="").charAt(0).toUpperCase()+t.substr(1)}}}),d={api:"api",urlCore:"",urlApp:"",urlDist:"",debug:!1,dev:!1,initLang:!0,lang:{}},f={},s={},u={},i={},a=[],h={},g={},n=null,y=[],m=function(t){return f.hasOwnProperty(t)},v=function(t,e){return e=p.extend(e||{},{dataType:"script",cache:!0,url:t}),jQuery.ajax(e)},r=function(t,e,n){var o,i,r=e.construct?e.construct():e,s=t.split("."),a=0;for(o="Bs"===s[0]?c:(void 0===window[s[0]]&&(window[s[0]]={}),window[s[0]]),s=s.slice(1);a<s.length-1;)void 0===o[s[a]]&&(o[s[a]]={}),o=o[s[a]],a++;if("object"==typeof o[i=s[s.length-1]]){var l=o[i];for(var u in o[i]=r,l)l.hasOwnProperty(u)&&(o[i][u]=l[u])}else o[i]=r;return f[t]=o[i],n&&(window[n]=f[t]),A(t+" has been defined"),r},w=function(t){var e;for(var n in h.hasOwnProperty(t)&&0===h[t].dependencies.length&&h[t].dfdRequire.resolve(),h)if(!1!==h.hasOwnProperty(n)&&(e=h[n].dependencies,"resolved"!==h[n].dfdRequire.state())){for(var o,i=0;o=e[i];i++)o===t&&e.splice(i,1);0===e.length&&w(n)}},b=function(t,e){A("... Waiting for "+t+"..."),setTimeout(function(){!0===m(t)?e.resolve():b(t,e)},10)},x=function(t,e,n){var o,i=!1;if(e=e||function(){},A(t+" has been required"),m(t))A(t+" is already defined");else{if(function(t){for(var e in h)if(!1!==h.hasOwnProperty(e)){if(e===t)return!0;for(var n,o=0;n=h[e].dependencies[o];o++)if(n===t)return!0}return!1}(t)){h[t]&&h[t].dependencies&&-1<(o=h[t].dependencies.indexOf(n))&&(g[n]=t,A(t+" is a circular reference in "+n),h[t].dependencies.splice(o,1)),i=!0;var r=new p.Deferred;b(t,r),p.when(r).then(function(){B(t,e)})}if(n?C(n,t):C(t),!i){var s,a,l,u=(l=(s=t).split("."),a=("Bs"===l[0]?d.urlCore+"/Bs/src":d.urlApp)+"/",-1<s.indexOf("View")?(l=l[l.length-1],a+=s.replace(/\./g,"/")+"/"+l+".js"):a+=s.replace(/\./g,"/")+".js",a);v(u).fail(function(){console.error('"'+t+'" not found @"'+u+'" or error during JS eval.')}).done(function(){p.when(h[t].dfdDefine).then(function(){B(t,e)})})}}},P=function(){var t,e,n=0;for(t in h)!1!==h.hasOwnProperty(t)&&n++;0===n&&(e=a.length-1,a[e].resolve())},B=function(t,e){e=e||function(){},A(t+" and its dependencies are ready"),w(t),delete h[t],e(f[t]),P()},C=function(t,e){(e=e||null)&&g[t]===e&&w(t),h.hasOwnProperty(t)?(h[t].dfdRequire=new p.Deferred,h[t].dfdDefine=new p.Deferred):h[t]={dependencies:[],dfdRequire:new p.Deferred,dfdDefine:new p.Deferred},e&&h[t].dependencies.push(e)},O={require:[],alias:!1,extend:!1,construct:!1},k=function(t){for(var e,n=[],o=0;e=t[o];o++)!1===m(e)&&n.push(e);return n},A=function(t){d.debug&&console.log(t)},S=function(t){return"string"==typeof t?[t]:t},T=function(t,e){r(e,t,t.alias)},E={},V=function(t,e){var n;if((e=p.extend({},O,e)).extend)if(f[e.extend]){if(n=f[e.extend].define(t,e),T(n,t),E.hasOwnProperty(t))for(var o in E[t])E[t].hasOwnProperty(o)&&V(o,E[t][o])}else!1===E.hasOwnProperty(e.extend)&&(E[e.extend]={}),E[e.extend][t]=e;else T(e,t)};window.Bs=c}(jQuery),i18n=i18next,Bs.define("Bs.Lang",{construct:function(){var s=[],i="/{{- ns}}/lng/{{lng}}.json",e={fallbackLng:!1,load:"languageOnly",ns:"Translation",defaultNS:"Translation",fallbackNS:"Translation",backend:{loadPath:Bs.getConfig().urlApp+i}},o=[];return{init:function(t,n){return n=n||function(){},(t=$.extend(!0,{},e,t)).backend.loadPath=t.ns?Bs.getConfig().urlApp+i:e.backend.loadPath,i18next.use(i18nextXHRBackend),i18next.use(window.i18nextBrowserLanguageDetector),i18next.init(t,function(){jqueryI18next.init(i18next,$,{tName:"t",i18nName:"i18n",handleName:"i18n",selectorAttr:"data-i18n",targetAttr:"i18n-target",optionsAttr:"i18n-options",useOptionsAttr:!0,parseDefaultValueFromContent:!0});for(var t,e=0;t=o[e];e++)i18next.addResourceBundle(t.lng,t.ns,t.resource);n()})},addResourceBundle:function(t,e,n){i18next.isInitialized?i18next.addResourceBundle(t,e,n):o.push({lng:t,ns:e,resource:n})},set:function(t,e){e=e||function(){},t!==i18next.language?(document.cookie="i18next="+t,i18next.changeLanguage(t,function(){Bs.Lang.translateAll(),e()})):e()},get:function(t){return t?i18next.options.lng:i18next.options.lng.split("-")[0]},translateAll:function(t){return(t=t||$("[data-i18n]")).i18n(),t},t:function(t,e){return i18next.t(t,e)},loadNamespace:function(t,e,n){var o=function(){void 0};return n||(n=e,e=null),e&&(i18next.options.backend.loadPath=e+i),n=n||function(){},-1<s.indexOf(t)?(o(),void n()):i18next.loadNamespaces(t,function(){s.push(t),o(),n()})},loadNamespaces:function(t,e){var n=[];for(var o in t)t.hasOwnProperty(o)&&-1<s.indexOf(t[o])&&n.push(t[o]);if(0!==t.length){var i=[];for(var r in t)t.hasOwnProperty(r)&&(i[r]=$.Deferred(),function(t,e){i18next.loadNamespaces(t,function(){s.push(t),e.resolve(!0)})}(t[r],i[r]));$.when.apply($,i).then(function(){e()})}else e()}}}}),Bs.define("Bs.Api",{require:"Bs.Response",construct:function(){var n="USR",o=function(t){var e=Bs.getConfig().api;return n&&(e+="/"+n),t&&("/"!==t.charAt(0)&&(e+="/"),e+=t),e},i=function(s,t){var e,n,o;return o={done:function(){},fail:function(t,e){t=e.responseJSON,"application/problem+json"===e.getResponseHeader("Content-Type")&&Bs.require("Bs.View.Alert.Toast",function(){Bs.View.Alert.Toast.apiProblem(t)})},always:function(){},then:function(){},loadComponent:function(t,e){Bs.create(t,{options:{response:e,request:e.getRequest()}})}},"function"==typeof(n=s)?o.done=n:"object"==typeof n&&(o.done=n.done||o.done,o.fail=n.fail||o.fail,o.always=n.always||o.always,o.then=n.then||o.then,o.loadComponent=n.loadComponent||o.loadComponent),s=o,e={type:"GET",url:"",data:null,dataType:"json",headers:r},$.extend(e,t),$.ajax(e).always(function(t,e,n){var o="success"!==e?t.responseJSON:t,i="success"!==e?t:n,r=Bs.create("Bs.Response",o);r.hasComponent()&&(r.requireComponent(function(t){console.info("Server response requires a component"),s.loadComponent(t,r)}),r.hasForkComponent())||(i.done(function(){s.done(r)}),i.fail(function(){s.fail(r,i)}),i.always(function(){s.always(r)}),i.then(function(){s.then(r)}))})},r={};function t(){}return t.stringifyPK=function(t){return t.join("-")},t.setSessionType=function(t){return n=t,this},t.getSessionType=function(){return n},t.setAuthToken=function(t){return r["Auth-Token"]=t,this},t.setAuthorization=function(t){return r.Authorization=t,this},t.getAuthToken=function(){return r.hasOwnProperty("Auth-Token")?r["Auth-Token"]:""},t.getAuthorization=function(){return r.hasOwnProperty("Authorization")?r.Authorization:""},t.url=function(t){return o(t)},t.call=function(t,e){return i(e,t)},t.get=function(t,e,n){return"function"==typeof e&&(n=e,e=null),i(n,{type:"GET",url:o(t),data:e,dataType:"json",headers:r})},t.post=function(t,e,n){return"function"==typeof e&&(n=e,e=null),window.FormData&&e instanceof FormData?i(n,{type:"POST",url:o(t),data:e,processData:!1,contentType:!1}):i(n,"object"==typeof e?{type:"POST",url:o(t),data:JSON.stringify(e),processData:!1,contentType:"application/json"}:{type:"POST",url:o(t),data:e})},t.delete=function(t,e,n){return i(n,"object"==typeof e?{type:"DELETE",url:o(t),data:JSON.stringify(e),processData:!1,contentType:"application/json"}:{type:"DELETE",url:o(t),data:e})},t.patch=function(t,e,n){return i(n,"object"==typeof e?{type:"PATCH",url:o(t),data:JSON.stringify(e),processData:!1,contentType:"application/json"}:{type:"PATCH",url:o(t),data:e,success:n})},t.put=function(t,e,n){return i(n,"object"==typeof e?{type:"PUT",url:o(t),data:JSON.stringify(e),processData:!1,contentType:"application/json"}:{type:"PUT",url:o(t),data:e})},t.buildCallback=function(t){var e={done:function(){},fail:function(){},always:function(){},nothing:function(){}};return"function"==typeof t?e.done=t:"object"==typeof t&&(e.done=t.done||e.done,e.fail=t.fail||e.fail,e.always=t.always||e.always,e.nothing=t.nothing||e.nothing),e},t}}),Bs.define("Bs.Template",{construct:function(){var h=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,g=["text/x-handlebars-template","text/x-handlebars","text/html"],y={cachedTpl:{},load:function(t,e,n){var o=new $.Deferred;return $.get(t).done(function(t){Handlebars.templates[e]=Handlebars.compile(t),o.resolve()}).fail(function(){console.error('Template "'+e+'" cannot be loaded @ "'+t+'".')}),o},loadPartial:function(t,e,n){var o=new $.Deferred;return $.get(t).done(function(t){Handlebars.registerPartial(e,t),o.resolve()}).fail(function(){console.error('Partial "'+e+'" cannot be loaded @ "'+t+'".')}),o}};return y.registerLoadedTemplate=function(t,e,n){for(var o,i,r,s,a,l,u=function(t){if(h.constructor!==RegExp)throw new Error("not RegExp");var e=[],n=null;if(h.global)for(;n=h.exec(t);)e.push(n);else(n=h.exec(t))&&e.push(n);return e}(t),p=t.replace(h,""),c=0;i=u[c];c++)if(o=$("<div></div>").html(i).find("script"),-1!==g.indexOf(o.attr("type"))){var d=o.attr("id");if(d){var f=-1<d.indexOf("Tpl")?d.substring(0,d.indexOf("Tpl")):d;Bs.View.compiledTpl[f]=Handlebars.compile(o.html())}}else"text/x-handlebars-partial"===o.attr("type")&&(s=e,l=a=void 0,(l=(r=o).attr("id"))||(l=s),a=-1<l.indexOf("Tpl")?l.substring(0,l.indexOf("Tpl")):l,Handlebars.registerPartial(a,r.html()));y.cachedTpl[e]=Handlebars.compile(p),n||Handlebars.registerPartial(e,p)},y}}),Bs.define("Bs.Collection",{require:"Bs.Model",construct:function(){var u=function(t,e,n){for(var o in n=n||{},t.items=[],t.apiParams=$.extend(!0,{},e.apiParams,n.apiParams),n)!1!==n.hasOwnProperty(o)&&("items"!==o?t[o]=n[o]:t.addList(n[o]))},o=function(t){this.initialize(t)};return o.pool={},o.prototype.items=[],o.prototype.itemsByPk={},o.prototype.nbInstances=0,o.prototype.id="collection",o.prototype.apiMethod="get",o.prototype.apiResource="",o.prototype.apiAction="list",o.prototype.apiParams=null,o.prototype.local=!0,o.prototype.pagination=null,o.prototype.cache=!1,o.prototype.model="",o.prototype.itemCount=0,o.prototype.nameAsAProperty="",o.prototype.type="collection",o.prototype.initialize=function(t){this.itemCount=0,this.id+="-"+ ++o.prototype.nbInstances,u(this,this,t)},o.prototype.getPagination=function(){return this.pagination},o.prototype.isNew=function(){return!0===this.local},o.prototype.setNew=function(e){return e=!!e,this.each(function(t){t.setNew(e)}),this.local=e,this},o.prototype.reset=function(){return this.items=[],this.itemCount=0,this},o.prototype.add=function(t){var e=this;if(t instanceof Bs.Model==!1){if(!e.model)throw new Error("Collection must have a model");t=Bs.create(e.model,t)}return e.collectionIndex=++e.itemCount,t.getCollection=function(){return e},t.index=e.collectionIndex,t.getIndex=function(){return this.index},e.items.push(t),t},o.prototype.replaceAt=function(t,e){var n=this;return e instanceof Bs.Model==!1&&(e=Bs.create(n.model,e)),e.getCollection=function(){return n},e.index=t,e.getIndex=function(){return this.index},n.items[t]=e},o.prototype.addList=function(t){if(!t)return this;for(var e,n=0;e=t[n];n++)e=this.add(e);return this},o.prototype.getAt=function(t){return this.items.hasOwnProperty(t)?this.items[t]:void 0},o.prototype.getAll=function(){return this.items},o.prototype.getLast=function(){if(0!==this.items.length)return this.items[this.items.length-1]},o.prototype.getFirst=function(){if(0!==this.items.length)return this.items[0]},o.prototype.setParam=function(t,e){return this.apiParams[t]=e,this},o.prototype.isInPool=function(){return this.buildSignature()in o.pool},o.prototype.addToPool=function(){o.pool[this.buildSignature()]=this},o.prototype.getFromPool=function(){return o.pool[this.buildSignature()]},o.prototype.buildSignature=function(){return this.id},o.prototype.fetch=function(t){var e,i=this,n=Bs.Api.buildCallback(t),r=n.done,o=(t=t||{}).page||1,s=t.limit||Bs.Collection.PAGE_SIZE,a=t.sort||!1,l=t.filter||!1,u=t.apiParams||i.apiParams,p=t.apiMethod||i.apiMethod,c=t.apiAction||i.apiAction,d=t.apiResource||i.apiResource,f=t.apiRoute||i.apiRoute;return n.done=function(t){i.cache&&i.addToPool(),i.reset(),i.local=!1,i.pagination=t.pagination();var e=t.getData();if(e&&"object"==typeof e)for(var n in e)if(!1!==e.hasOwnProperty(n)){var o=Bs.Model.buildSignature(i.model,e[n].id);Bs.Model.isInPool(o)?i.add(Bs.Model.getFromPool(o)):i.add(e[n]).setInitialData(e[n])}r.call(i,t)},c=c?"/"+c:c,e=f||d+c,(u=$.extend(!0,u,{page:o,limit:s})).sort=a||null,u.filter=l||null,Bs.Api[p.toLowerCase()](e,u,n)},o.prototype.hasValue=function(t,e){for(var n in this.items)if(this.items.hasOwnProperty(n)&&this.items[n].get(e)===t)return!0;return!1},o.prototype.toObject=function(e){var n=[];return this.each(function(t){n.push(t.toObject(e))}),n},o.prototype.save=function(t){t=t||{};var e,n,o,i,r=this,s=[],a=[],l=[],u=Bs.Api.buildCallback(t),p=u.done,c=t.apiParams||{};if(r.each(function(t){t.isSuppressed()?!1===t.isNew()&&l.push(t.toObject()):t.isNew()?s.push(t.toObject()):t.isModified()&&a.push(t.toObject())}),u.done=function(i){0<a.length||0<l.length?r.each(function(t,e){if(1<t.pk.length)throw new Error("You must implement an auto-incremented PK or implement multiple PK handling for collection");for(var n,o=0;n=i.getData()[o];o++)n[t.pk[0]]===t.getPK(!0)&&r.replaceAt(e,n);t.modifiedFields=[],t.local=!1}):(r.reset(),r.addList(i.getData()),r.each(function(t){t.modifiedFields=[],t.local=!1})),p.call(r,i)},i=r.apiResource+"/"+r.apiAction,!s.length&&!a.length&&!l.length)return u.always(),void u.nothing();if(s.length){var d={list:s};d=$.extend(!0,d,c),n=Bs.Api.post(i,d)}else n=(new $.Deferred).resolve();if(a.length){var f={list:a};f=$.extend(!0,f,c),e=Bs.Api.patch(i,f)}else e=(new $.Deferred).resolve();if(l.length){var h={list:l};h=$.extend(!0,h,c),o=Bs.Api.delete(i,h)}else o=(new $.Deferred).resolve();$.when(n,e,o).then(function(t,e,n){var o;o=t?(e&&$.extend(!0,t[0].data,e[0].data),new Bs.Response(t[0])):new Bs.Response(e[0]),u.done(o),u.always(o)},function(){u.fail(),u.always()})},o.prototype.isEmpty=function(){return 0===this.items.length},o.prototype.each=function(t){for(var e,n=0;(e=this.items[n])&&!1!==t(e,n);n++);},o.prototype.findFirstWhere=function(t,e,n){for(var o=0;this.items[o];o++)if(this.items[o].get(t)===e)return this.items[o];return null},o.prototype.count=function(){return this.items.length},o.prototype.getLength=function(){return this.items.length},o.prototype.removeFirstWhere=function(t,e,n){for(var o=0;this.items[o];o++)if(this.items[o].get(t)===e)return this.items.splice(o,1),o;return-1},o.prototype.remove=function(t){if(1<t.pk.length)throw new Error("Composed PK is not managed yet, sorry... :(");this.removeFirstWhere(t.pk[0],t.getPK()[0])},o.prototype.suppress=function(t){t.suppress()},o.prototype.restore=function(t){t.restore()},o.prototype.getNameAsAProperty=function(){return this.nameAsAProperty},o.prototype.toArray=function(){var e=[];return this.each(function(t){e.push(t.toObject())}),e},o.prototype.sortBy=function(n,o){this.items.sort(function(t,e){return t.get(n)>e.get(n)?o?-1:1:e.get(n)>t.get(n)?o?1:-1:0})},o.define=function(t,e,n){n=n||function(){};var o,i,r=this,s=function(){},a=function(){return r.apply(this,arguments)};a.define=r.define,s.prototype=r.prototype,a.prototype=new s,i=(o=(o=t.split("."))[o.length-1]).charAt(0).toLowerCase(),a.prototype.apiResource=i+o.substr(1),u(a.prototype,r.prototype,e);var l=t.split(".");return i=(l=l[l.length-1]).charAt(0).toLowerCase(),a.prototype.nameAsAProperty=i+l.substr(1),a.prototype.id=t.replace(/\./g,"-").toLowerCase(),n(a,[a.prototype.model]),a},o.create=function(t,e){(e=e||{}).extend="Bs.Collection";var n=o.define(t,e);if(!n.prototype.model)throw new Error("Collection must have a model");return Bs.register(t,n),new n},o}},function(){Bs.Collection.PAGE_SIZE=20}),Bs.define("Bs.DataBinder",{require:["Bs.Collection"],construct:function(){var u=["INPUT","SELECT","TEXTAREA"],t=function(){this.initialize&&this.initialize.apply(this,arguments)};t.prototype.view=null,t.prototype.autoBind=!0,t.prototype.bindAttribute="name",t.prototype.initialize=function(t){t=t||{};var e=this;if($.extend(this,t),null===e.view)throw new Error("You must create object with a view param");if(!e.view.model||$.isEmptyObject(e.view.model))throw new Error("No model used by "+this.view.name);e.autoBind&&(e.view.isRendered()?e.bind():e.view.one("beforeDataBind",function(){e.bind()}))},t.prototype.modelToView=function(t,e){var n,o,i,r,s=this.view,a='[data-bind-model="'+t.getNameAsAProperty()+'"][data-bind-property="'+e+'"]';n=e in t&&"function"==typeof t[e]?t[e].call(t):t.get(e),(o=s.$el.find(a)).length&&o.each(function(){var t=$(this);i=this.tagName,r=t.attr("type"),-1<u.indexOf(i)?"radio"===r?t.filter('[value="'+n+'"]').prop("checked",!0):"checkbox"===r?t.prop("checked",n):"file"===r?t.val(""):t.val(n):o.data("bindAttr")?"class"===o.data("bindAttr")?t.toggleClass(n):t.attr(o.data("bindAttr"),n):o.data("bindHtml")?t.html(n):n&&t.text(n)})},t.prototype.bind=function(){var o=this,l=o.view,i=this.bindAttribute,r={},t="["+i+"], [data-bind]";for(var e in l.$el.find(t).each(function(){var a,t=$(this);if(t.hasClass("dataBind"))return!0;var e=t.attr("data-bind")||t.attr(i);if(e?t.attr("data-bind",e):e=t.data("bind"),!e)return!0;var n=p(e,l);if(null===(a=n.model)||$.isEmptyObject(a))return!0;e=n.property,t.attr("data-bind-model",a.getNameAsAProperty()),t.attr("data-bind-property",e),t.addClass("dataBind"),!1===r.hasOwnProperty(a.getNameAsAProperty())&&(r[a.getNameAsAProperty()]=a),t.on("change",function(){var t,e=$(this),n=e.attr("data-bind"),o=e[0].tagName,i=$(e[0]).attr("type");if(-1<u.indexOf(o))if("radio"===i){var r=e.attr("name");t=l.$el.find("input[name='"+r+"']").filter(":checked").val()}else t="checkbox"===i?e.prop("checked"):e.val();else t=e.html();var s=p(n,l);a=s.model,(n=s.property)in a&&"function"==typeof a[n]?a[n].call(a,t):a.set(n,t,!0)}),o.modelToView(a,e)}),r)if(!1!==r.hasOwnProperty(e)&&"set"in r[e]&&"object"==typeof r[e]){r[e].set;!function(t,n){r[e].set=function(t,e,n){return n=n||!1,this.constructor.prototype.set.call(this,t,e,n),n||o.modelToView(this,t),this},r[e].setInitialData=function(t){for(var e in t=t||{},n.call(this,t),t)t.hasOwnProperty(e)&&this.has(e)&&o.modelToView(this,e)}}(0,r[e].setInitialData)}};var p=function(t,e){var n,o;if(-1===t.indexOf("."))o=e.getModel();else{var i=t.split(".");t=i.pop(),n=i[0],null===(o=e.getModel(n))?o=e.getModel().get(i.join(".")):1<i.length&&(n=i[i.length-1],o=o.get(n))}return{model:o,property:t}};return t}}),Bs.define("Bs.Model",{require:["Bs.Api"],construct:function(){var p=function(t){return t.replace(/\./g,"-").toLowerCase()},c=function(){this.initialize&&this.initialize.apply(this,arguments)};c.pool={},c.prototype.nbInstances=0,c.prototype.className="",c.prototype.nameAsAProperty="",c.prototype.id="model",c.prototype.apiResource="",c.prototype.apiRoute=null,c.prototype.apiAction="",c.prototype.pk=["id"],c.prototype.autoIncrement=!0,c.prototype.relations={},c.prototype.local=!0,c.prototype.initializingData=!1,c.prototype.fields={},c.prototype.extraData={},c.prototype.fn={},c.prototype.modifiedFields=[],c.prototype.suppressed=!1,c.prototype.type="model",c.prototype.triggeredEvents=null,c.prototype.initialize=function(t){var e=this;for(var n in e.fieldsDefault=$.extend({},e.fields),e.fields=$.extend({},e.fields),e.modifiedFields=[],e.initialData={},e.extraData={},e.relations)if(e.relations.hasOwnProperty(n)&&!e.fields[n]){if("object"==typeof t&&null!==t&&"caller"in t&&e.relations[n]===t.caller)continue;e.setRelation(n,{caller:e.className})}e.setData(t),e.id+="-"+ ++c.prototype.nbInstances},c.prototype.has=function(t){return this.fields.hasOwnProperty(t)},c.prototype.get=function(t){if(0<t.indexOf(".")){var e=t.split(".");return this.getSubModel(e.shift(),e)}return this.has(t)?this.fields[t]:null},c.prototype.getSubModel=function(t,e){return t in this.relations?this.fields[t].get(e):"object"==typeof this.fields[t]?this.fields[t][e]:null},c.prototype.getPK=function(t){for(var e,n=[],o=0;e=this.pk[o];o++)n.push(this.get(e));return t?n.join("-"):n},c.prototype.isAutoIncrement=function(){return!0===this.autoIncrement};c.prototype.setRelation=function(t,e){var n=this.relations[t],o=this.fields[t];if(o&&!$.isEmptyObject(o)||(o=this.fields[t]=Bs.create(n,e),function(t,e){var n=this;t.getParentRelation=function(){return n},t.getParentFieldName=function(){return e}}.call(this,o,t)),e instanceof Bs.Collection||e instanceof Bs.Model)return this.isInitializingData()&&e.setNew(this.isNew()),this.fields[t]=e,this;if("collection"===o.type)return o.reset(),o.addList(e),this.isInitializingData()&&o.setNew(this.isNew()),this;if("model"===o.type)return o.setInitialData(e,!e||this.isNew()),this;throw new Error("[Bs.Model] Unknown relation type for '"+t+"' in '"+this.className+"'")},c.prototype.set=function(t,e){var n,o,i;if(!t||!1===this.has(t)||this.get(t)===e)return this;if("string"==typeof e&&(e=$.trim(e)),0<t.indexOf(".")){if(o=(n=t.split(".")).shift(),i=n,o in this.relations)return this.fields[o].set(i,e),this;this.fields[o]&&"object"==typeof this.fields[o]&&this.fields[o].hasOwnProperty(i)&&(this.fields[o][i]=e)}else t in this.relations?this.setRelation(t,e):this.fields[t]=e;if(!this.isInitializingData()&&!this.isNew()){var r=this.modifiedFields.indexOf(t);this.getInitial(t)===e?-1<r&&this.modifiedFields.splice(r,1):-1===r&&this.addModifiedField(t)}return this},c.prototype.addModifiedField=function(t){this.modifiedFields.push(t)},c.prototype.setData=function(t){for(var e in t=t||{})t.hasOwnProperty(e)&&this.has(e)&&this.set(e,t[e])},c.prototype.getSignature=function(){return p(this.className)+"-"+this.getPK(!0)},c.buildSignature=function(t,e){return p(t)+"-"+e},c.isInPool=function(t){return void 0!==c.pool[t]},c.getFromPool=function(t){return c.pool[t]},c.addToPool=function(t,e){return c.pool[t]=e},c.removeFromPool=function(t){c.isInPool&&delete c.pool[t]},c.getFromPoolOrFetch=function(t,e,n){var o,i=c.buildSignature(t,e);return n=n||function(){},c.isInPool(i)?(o=c.getFromPool(i),n.call(o,o),(new $.Deferred).resolve()):(o=Bs.create(t)).fetch({pk:e,done:function(){n.call(o,o)}})},c.prototype.setInitialData=function(t,e){for(var n in t=t||{},this.modifiedFields=[],this.setNew(e),this.setInitializingData(!0),t)t.hasOwnProperty(n)&&this.has(n)&&(this.initialData[n]=t[n],this.set(n,t[n]));this.setInitializingData(!1)},c.prototype.getInitial=function(t){return this.has(t)?this.initialData[t]:void 0},c.prototype.isNew=function(){return!0===this.local},c.prototype.setNew=function(t){return t=!!t,this.local=t,this},c.prototype.setInitializingData=function(t){return t=!!t,this.initializingData=t,this},c.prototype.isInitializingData=function(){return!0===this.initializingData},c.prototype.isModified=function(){return 0<this.modifiedFields.length},c.prototype.isSuppressed=function(){return this.suppressed},c.prototype.suppress=function(){return this.suppressed=!0,this},c.prototype.restore=function(){return this.suppressed=!1,this},c.prototype.isModifiedField=function(t){return-1<this.modifiedFields.indexOf(t)},c.prototype.reset=function(){if(this.isNew())this.setData(this.fieldsDefault);else for(var t,e=0;t=this.modifiedFields[e];e++)this.set(t,this.getInitial(t));return this},c.prototype.fetch=function(t){var e,n,o,i,r,s,a,l,u=this;return t=t||{},e=Bs.Api.buildCallback(t),n=e.done,i=t.apiParams||null,r=t.apiAction||u.apiAction,s=t.apiRoute||u.apiRoute,a=t.apiResource||u.apiResource,l=t.pk||this.getPK(!0),e.done=function(t){var e=t.getData();e&&u.setInitialData(e),c.addToPool(u.getSignature(),u),n.call(u,t)},o=s?s||a+l+r:a+(l=l?"/"+l:l)+(r=r?"/"+r:r),Bs.Api.get(o,i,e)},c.prototype.delete=function(t){t=t||{};var e=this,n=Bs.Api.buildCallback(t),o=n.done,i=t.apiParams||null,r=t.apiAction||e.apiAction,s=t.apiResource||e.apiResource,a=t.pk||this.getPK(!0);n.done=function(t){e.setInitialData(t.getData(),!0),c.removeFromPool(e.getSignature(),e),o.call(e,t)},r=r?"/"+r:r,a=a?"/"+a:a,Bs.Api.delete(s+a+r,i,n)},c.prototype.save=function(t){t=t||{};var e,n=this,o=Bs.Api.buildCallback(t),i=o.done,r=t.apiParams||{},s=t.apiAction||n.apiAction,a=t.apiResource||n.apiResource,l=t.apiRoute||n.apiRoute;o.done=function(t){n.setInitialData(t.getData()),i.call(n,t)},s&&(s="/"+s);var u={};this.isNew()?(e=l||a+s,!1!==n.isAutoIncrement()||l||(e+="/"+this.getPK(!0)),u=$.extend(!0,{},this.toObject(),r),Bs.Api.post(e,u,o)):(e=l||a+"/"+this.getPK(!0)+s,n.isModified()?(u=$.extend(!0,{},this.toModifiedObject(),r),Bs.Api.patch(e,u,o)):t.force?Bs.Api.patch(e,r,o):(o.always(),o.nothing()))},c.prototype.setApiAction=function(t){return this.apiAction=t,this},c.prototype.toObject=function(t){var e,n=this,o={};for(var i in this.fields)this.fields.hasOwnProperty(i)&&(this.relations.hasOwnProperty(i)?(e=this.get(i),o[i]=e&&e.toObject&&e.toObject(t)||null):o[i]=this.get(i));if(t){var r={};for(var s in n.fn)n.fn.hasOwnProperty(s)&&function(t){r[t]=function(){return n.fn[t].apply(n,arguments)}}(s);$.extend(!0,o,this.getExtraData(),r)}return o},c.prototype.getExtraData=function(t){return t?this.extraData.hasOwnProperty(t)?this.extraData[t]:null:this.extraData},c.prototype.setExtraData=function(t,e){return this.extraData[t]=e,this},c.prototype.toModifiedObject=function(){for(var t,e,n={},o=0;e=this.modifiedFields[o];o++)this.relations.hasOwnProperty(e)?(t=this.get(e),n[e]=t&&t.toObject&&t.toObject()||null):n[e]=this.get(e);return n},c.prototype.toJSON=function(){return JSON.stringify(this.toObject())},c.prototype.getClassName=function(){return this.className},c.prototype.getNameAsAProperty=function(){return this.nameAsAProperty},c.prototype.on=function(t,e){return e=e||function(){},this.triggeredEvents.hasOwnProperty(t)&&(e(null,this.triggeredEvents[t]),delete this.triggeredEvents[t]),$(this).on(t,e),this},c.prototype.off=function(t){return $(this).off(t),this},c.prototype.one=function(t,e){return e=e||function(){},this.triggeredEvents.hasOwnProperty(t)&&(e(null,this.triggeredEvents[t]),delete this.triggeredEvents[t]),$(this).one(t,e),this},c.prototype.trigger=function(t,e){return this.triggeredEvents[t]=e,$(this).triggerHandler(t,e),this};return c.define=function(t,e,n){n=n||function(){},e.fields=e.fields||{};var o,i=this,r=function(){},s=function(){return i.apply(this,arguments)};s.define=i.define,r.prototype=i.prototype,function(t,e,n){for(var o in t.fields=$.extend(!0,{},e.fields,n.fields),t.fn=$.extend(!0,{},e.fn,n.fn),t.relations=$.extend(!0,{},e.relations,n.relations),t.triggeredEvents={},n.fields=void 0,n.relations=void 0,n)!1!==n.hasOwnProperty(o)&&void 0!==n[o]&&("function"==typeof n[o]&&(t.fn[o]=n[o]),t[o]=n[o]);t.modifiedFields=[],t.initialData={},t.pk=Bs.Util.arrayFromString(t.pk)}(s.prototype=new r,i.prototype,e),s.prototype.id=p(t);var a=(s.prototype.className=t).split("."),l=(a=a[a.length-1]).charAt(0).toLowerCase();for(var u in s.prototype.nameAsAProperty=l+a.substr(1),e.apiResource?s.prototype.apiResource=e.apiResource:s.prototype.apiResource||(s.prototype.apiResource=s.prototype.nameAsAProperty),o=[],s.prototype.relations)s.prototype.relations.hasOwnProperty(u)&&o.push(s.prototype.relations[u]);return n(s,o),s},c.create=function(t,e){return(e=e||{}).extend="Bs.Model",new(c.define(t,e))},c}}),Bs.define("Bs.Response",{construct:function(){var t=function(){this.initialize&&this.initialize.apply(this,arguments)};return t.prototype.response=null,t.prototype.getData=function(t){return null===this.response.data?null:t?this.response.data.hasOwnProperty(t)?this.response.data[t]:null:this.response.data},t.prototype.getTotal=function(){return this.response.total},t.prototype.getError=function(){return this.response.error},t.prototype.getErrorCode=function(){return parseInt(this.response.error.code)},t.prototype.getErrorMsg=function(){return this.response.error.msg},t.prototype.getErrorDescription=function(){return this.response.error.description},t.prototype.getDescription=function(){return this.response.description},t.prototype.getRequest=function(){return this.response.request},t.prototype.getSessionType=function(){return this.response.sessionType},t.prototype.hasComponent=function(){return""!==this.response.loadComponent},t.prototype.hasForkComponent=function(){return this.response.forkComponent},t.prototype.requireComponent=function(t){var e=this;t=t||function(){},e.response.hasOwnProperty("loadComponent")?Bs.require(e.response.loadComponent,function(){t(e.response.loadComponent)}):t(null,e.response,e.request)},t.prototype.hasError=function(){return!0!==this.response.success},t.prototype.dump=function(){console.log(this.response)},t.prototype.first=function(){return this.response.first},t.prototype.firstPage=function(){return this.response.firstPage},t.prototype.haveToPaginate=function(){return this.response.haveToPaginate},t.prototype.last=function(){return this.response.last},t.prototype.lastPage=function(){return this.response.lastPage},t.prototype.limit=function(){return this.response.limit},t.prototype.links=function(){return this.response.links},t.prototype.page=function(){return this.response.page},t.prototype.total=function(){return this.response.total},t.prototype.pagination=function(){return{first:this.response.first,firstPage:this.response.firstPage,haveToPaginate:this.response.haveToPaginate,last:this.response.last,lastPage:this.response.lastPage,limit:this.response.limit,links:this.response.links,page:this.response.page,total:this.response.total}},t.prototype.initialize=function(t){t=t||{};var e=this;for(var n in e.response={action:"",apiVersion:"",data:{},method:"",resource:"",description:"",success:!1,error:{code:0,debug:null,description:"",msg:""},first:0,firstPage:0,haveToPaginate:!1,last:0,lastPage:0,limit:0,links:[],page:0,total:0,start:0,filter:{},sort:{},loadComponent:"",forkComponent:!1,request:{},sessionType:""},t)t.hasOwnProperty(n)&&e.response.hasOwnProperty(n)&&(e.response[n]=t[n]);if(t.hasOwnProperty("error")&&"object"==typeof t.error)for(var o in e.response.success=!("error"in t),t.error)t.error.hasOwnProperty(o)&&e.response.error.hasOwnProperty(n)&&(e.response.error[n]=t.error[n]);else e.response.success=!0},t}}),Bs.define("Bs.Storage",{construct:function(){var n;return this.hasItem=function(t){return n.hasOwnProperty(t)},this.setItem=function(t,e){return n.setItem(t,JSON.stringify(e))},this.getItem=function(t){var e=n.getItem(t);return"undefined"==e?e:JSON.parse(e)},this.removeItem=function(t){return n.removeItem(t)},this.clear=function(){n.clear()},n=!0===function(){if("object"!=typeof localStorage)return!1;try{return localStorage.setItem("support","support"),"support"===localStorage.getItem("support")&&(localStorage.removeItem("support"),!0)}catch(t){return!1}}()?localStorage:(console.warn('Your device does not support localStorage. Some features will be disabled and you will need to sign in again if you reload the page. On iOS (iPhone, iPad) you can disable "Private browsing" in Safari to enable all the application features'),function(){function t(){this.store={}}return t.prototype.setItem=function(t,e){this.store[t]=e},t.prototype.getItem=function(t){return void 0!==this.store[t]?this.store[t]:null},t.prototype.removeItem=function(t){this.store[t]=void 0},t.prototype.clear=function(){this.store={}},t.prototype.hasOwnProperty=function(t){return this.store.hasOwnProperty(t)},new t}()),this}}),Bs.define("Bs.Stylesheet",{construct:function(){var o=0,i=[],r=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)|AndroidWebKit\/([^ ;]*)/)||0,s=!1,a=!0;t[1]||t[7]?s=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]||t[8]?a=!1:t[4]&&(s=parseInt(t[4])<18);var l,u,p,e={},c=function(t){l=document.createElement("style"),r.appendChild(l),l.id="stylesheet-"+t,u=l.styleSheet||l.sheet},n=0,d=[],f=function(t,e){u.addImport(t),l.onload=function(){h()},31==++n&&(c(e),n=0)},h=function(){p();var t=d.shift();t?(p=t[1],f(t[0])):p=null};return e.load=function(t){var e=new $.Deferred,n=i.indexOf(t);return-1<n&&$("#stylesheet-"+n).remove(),i[++o]=t,(s?function(t,e,n){if(u&&u.addImport||c(e),u&&u.addImport)p?d.push([t,n]):(f(t,e),p=n);else{l.textContent='@import "'+t+'";';var o=setInterval(function(){try{l.sheet.cssRules,clearInterval(o),n()}catch(t){}},10)}}:function(t,e,n){var o=document.createElement("link");if(o.id="stylesheet-"+e,o.type="text/css",o.rel="stylesheet",a)o.onload=function(){o.onload=function(){},setTimeout(n,7)};else var i=setInterval(function(){for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].href==o.href)return clearInterval(i),n()},10);o.href=t,r.appendChild(o)})(t,o,function(){e.resolve()}),e},e.unload=function(t){},e}}),Bs.define("Bs.View",{require:["Bs.Lang","Bs.Stylesheet","Bs.View.Loading"],construct:function(){var a=function(e){var n=this,o=function(){n.trigger("afterInitialize"),n.autoRender&&n.render()};t.call(n,e).then(function(){var t;n.one("ready",function(){n.$el.addClass("bs-view-ready")}),(t=n.initialize(e))&&"then"in t?t.fail(function(){n.initializeFail.apply(n,arguments)}).then(function(){o()}):o()})};a.nbInstances=0,a.prototype.model=null,a.prototype.bindData=!1,a.prototype.modelPK=0,a.prototype.params={},a.prototype.options=null,a.prototype.elTag="div",a.prototype.elStyle=null,a.prototype.zIndex=0,a.prototype.id="view",a.prototype.name="View",a.prototype.fullCamelName="view",a.prototype.fileName="View",a.prototype.urlPath="View",a.prototype.urlRoot=Bs.getConfig().urlApp,a.prototype.renderTo="body",a.prototype.elClass="",a.prototype.tpl="",a.prototype.cachedPartials={},a.compiledTpl={},a.prototype.hasTemplate=!0,a.prototype.hasStylesheet=!0,a.prototype.hasTranslation=!0,a.prototype.stylesheetId=null,a.prototype.events={},a.prototype.autoRender=!0,a.prototype.autoMask=!0,a.prototype.rendered=!1,a.prototype.require=[],a.prototype.cssPath=null,a.prototype.templatePath=null,a.prototype.translationPath=null,a.prototype.subViewList=null,a.prototype.subViewOptions=null,a.prototype.buildPartialId=function(){return this.fullCamelName},a.prototype.getParam=function(t){return this.params.hasOwnProperty(t)?this.params[t]:null},a.prototype.initializeFail=function(){var t=this;Bs.require("Bs.View.Alert",function(){Bs.View.Alert.error("",$(t.renderTo))})},a.prototype.getOption=function(t){return this.options.hasOwnProperty(t)?this.options[t]:null},a.prototype.setOption=function(t,e){return this.options[t]=e,this},a.prototype.initialize=function(t){};var t=function(t){t=t||{};var n,o=this,e=[],i=new $.Deferred,r=new $.Deferred;for(var s in++a.nbInstances,o.id+="-"+a.nbInstances,o.zIndex=a.nbInstances,d(o,o,t,!1),o.options.id=o.id,Bs.storeCmp(o),o.$el=$("<"+o.elTag+" />",{id:o.id,class:o.elClass+" bs-view"}),o.elStyle&&o.$el.css(o.elStyle),o.model)!1!==o.model.hasOwnProperty(s)&&"string"==typeof o.model[s]&&(s=Bs.Util.addPrefixIfMissing("Model",s),e.push(s),o.require.push(s));return o.require.length?Bs.require(o.require,function(){i.resolve()}):i.resolve(),$.when(i).then(function(){for(var t in o.model)if(!1!==o.model.hasOwnProperty(t)){if((n=o.model[t])instanceof Bs.Model==!1){var e=Bs.create(n);delete o.model[n],e.createdByView=!0,n=e}o.model[n.getNameAsAProperty()]=n}o.modelPK&&o.getModel().createdByView?$.when(o.fetchModel(o.modelPK)).then(function(){r.resolve()}):r.resolve()}),r};a.prototype.fetchModel=function(t,e){var n,o=this,i=new $.Deferred,r=Bs.Model.buildSignature(o.getModel().className,t);return!e&&Bs.Model.isInPool(r)?(n=Bs.Model.getFromPool(r),o.model[n.getNameAsAProperty()]=n,i.resolve()):o.getModel().fetch({pk:t,done:function(){i.resolve()},fail:function(){throw i.resolve(),Bs.View.Modal.Alert.Error("danger.msg.notFetched"),o.options.autoRender=!1,new Error("Unable to autoFetch model")}}),i},a.prototype.setModel=function(t){return this.model[t.getNameAsAProperty()]=t,this},a.prototype.on=function(t,e){return e=e||function(){},this.triggeredEvents.hasOwnProperty(t)&&(e(null,this.triggeredEvents[t]),delete this.triggeredEvents[t]),$(this).on(t,e),this},a.prototype.off=function(t){return $(this).off(t),this},a.prototype.one=function(t,e){return e=e||function(){},this.triggeredEvents.hasOwnProperty(t)&&(e(null,this.triggeredEvents[t]),delete this.triggeredEvents[t]),$(this).one(t,e),this},a.prototype.trigger=function(t,e){return this.triggeredEvents[t]=e,$(this).trigger(t,e),this},a.prototype.triggerHandler=function(t,e){return this.triggeredEvents[t]=e,$(this).triggerHandler(t,e),this},a.prototype.getModel=function(t){if(!t)for(var e in this.model){if(this.model.hasOwnProperty(e)){if("string"==typeof this.model[e])continue;return this.model[e]}return null}return this.model.hasOwnProperty(t)?this.model[t]:null},a.prototype.t=function(t,e){return Bs.Lang.t(this.translationPath+":"+t,e)},a.prototype.renderTpl=function(t,e,n){return this.renderCompiledTpl(t,e,n)},a.prototype.getPartial=function(t,e){var n,o,i=new $.Deferred;return e?e+="/tpl":e=this.tplPath,n=e+"/"+t,Handlebars.partials.hasOwnProperty(n)?i.resolve():(o=this.urlRoot+"/"+n+".partial",Bs.Template.loadPartial(o,n).then(function(){i.resolve()})),i.then(function(){if(!Handlebars.partials[n])throw Error('Partial "'+n+'" Not found')}),i},a.prototype.getTpl=function(t,e,n){var o,i,r=this,s=new $.Deferred,a=new $.Deferred;return n?n+="/tpl":n=r.tplPath,o=n+"/"+t,Handlebars.templates.hasOwnProperty(o)?s.resolve():(i=r.urlRoot+"/"+o+".handlebars",Bs.Template.load(i,o).then(function(){s.resolve()})),s.then(function(){if(e=e?u(e):{},!Handlebars.templates[o])throw Error('Template "'+o+'" Not found');l.call(r,Handlebars.templates[o](e),function(t){var e=Bs.Lang.translateAll($(t));a.resolve(e)})}),a},a.prototype.loadTpl=function(t){var e,n=new $.Deferred,o=this.tplPath+"/"+t;return Handlebars.templates.hasOwnProperty(o)?n.resolve():(e=this.urlRoot+"/"+this.tplPath+"/"+t+".handlebars",Bs.Template.load(e,o).then(function(){n.resolve()})),n},a.prototype.renderCompiledTpl=function(t,e,n){var o,i,r=this,s=new $.Deferred,a=r.tplPath+"/"+t;return r.loadTpl(t).then(function(){if(e="function"==typeof e?(n=e,{}):e?u(e):{},n=n||function(){},!(i=Handlebars.templates[a]))throw Error('Template "#'+t+'Tpl" not found in "'+r.name+'" view');return o=i(e),l.call(r,o,function(t){var e=Bs.Lang.translateAll($(t));n(e),s.resolve()})}),s},a.prototype.getTemplateHtml=function(e){var t,n=this;e=e||function(){},t="function"==typeof n.tpl?n.tpl(u(n.getTplData())):n.tpl,l.call(n,t,function(t){e(t)})};a.prototype.render=function(t){var e=this;return t&&(e.renderTo=$(t)),function(t){var e=this,n=new $.Deferred;if(t=t||$(e.renderTo),e.isRendered())return console.warn('View "'+e.name+'" is already rendered'),n.resolve();if(0===t.length)throw console.info(t),new Error('View "'+e.name+'" cannot be rendered in renderTo element');return e.$el.appendTo(t),e.$el.attr("data-view",!0),e.$el.data("view",e),e.trigger("beforeRender"),e.autoMask&&e.mask(),e.getTemplateHtml(function(t){e.$el.append(t),e.addEvents(e.events),e.translate(),e.trigger("beforeCreateSubView"),e.createSubViews(function(){e.rendered=!0,e.bindData&&(e.trigger("beforeDataBind"),e.dataBinder=Bs.create("Bs.DataBinder",{view:e})),e.autoMask&&e.unmask(),n.resolve()})}),n}.call(this,e.renderTo).then(function(){e.trigger("afterRender")})},a.prototype.reset=function(){var e=this;e.getTemplateHtml(function(t){e.$el.html(t),e.translate(),e.createSubViews(function(){e.rendered=!0,e.bindData&&(e.dataBinder=Bs.create("Bs.DataBinder",{view:e})),e.autoMask&&e.unmask(),e.afterRender()})})},a.prototype.translate=function(){Bs.Lang.translateAll(this.$el)},a.prototype.createSubViews=function(i){i=i||function(){};var r,s,t,a,l=this,u=[],p=[],c=0;0!==(t=this.$el.find("[data-create]")).length?(t.each(function(t,e){if(r=$(e),!(s=r.data("create")))return!0;((a=l.getSubViewOptions(s)).renderTo=r).data("id")&&(a.id=r.data("id"));var n=r.data("model");n&&(a.model=!0===n?l.getModel():l.getModel().get(n));var o=r.data("modelpk");o&&(a.modelPK=o),"object"==typeof r.data("options")?p.push($.extend({},r.data("options"),a)):p.push(a),u.push(s)}),(c=u.length)?Bs.require(u,function(){for(var t,e,n=new $.Deferred,o=0;e=u[o];o++)(t=Bs.create(e,p[o])).on("afterRender",function(){0===--c&&n.resolve()}),l.subViewList[p[o].id||e]=t;$.when(n).then(function(){i()})}):i()):i()},a.prototype.getSubView=function(t){if(!t)for(var e in this.subViewList)if(!1!==this.subViewList.hasOwnProperty(e))return this.subViewList[e];return this.subViewList[t]},a.prototype.onafterRender=function(){},a.prototype.afterRender=function(){this.trigger("ready")},a.prototype.beforeRender=function(){},a.prototype.beforeDestroy=function(){},a.prototype.isRendered=function(){return!0===this.rendered},a.prototype.hide=function(t){},a.prototype.show=function(t){},a.prototype.triggeredEvents=null,a.prototype.mask=function(t,e){return 0===(e=e?this.$el.find($(e)):this.$el).length||(e.find(".bs-view-loading").remove(),Bs.create("Bs.View.Loading",{text:t,renderTo:e})),this},a.prototype.unmask=function(t,e,n){return t=t?this.$el.find($(t)):this.$el,e?(t.find(".bs-view-loading").remove(),n&&n()):t.find(".bs-view-loading").fadeOut(function(){$(this).remove(),n&&n()}),this},a.prototype.close=function(){this.destroy()},a.prototype.destroy=function(t){var e,n=this;if(t=t||function(){},n.bindData){var o=n.getModel();"object"==typeof o&&null!==o&&o.isNew&&!1===o.isNew()&&o.reset()}n.isRendered()&&n.$el.find("[data-view]").each(function(){n===$(this).parent().closest("[data-view]").data("view")&&(e=$(this).data("view")).destroy.call(e)}),n.trigger("beforeDestroy"),n.isRendered()&&n.$el.remove(),Bs.removeCmp(n.id),n.trigger("afterDestroy"),n.off(),t()},a.prototype.formToObject=function(t){var e={},n=$(t).serializeArray();return $.each(n,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},a.prototype.validateForm=function(t,e){var n;return e.checkValidity?((n=e.checkValidity())||$('<input type="submit">').hide().appendTo($(e)).click().remove(),t.preventDefault(),n):(console.warn("checkValidity is not supported by browser, todo implement manual check"),t.preventDefault(),!0)},a.prototype.disableInputs=function(){this.$el.find(":input").prop("disabled",!0).addClass("disabled")},a.prototype.enableInputs=function(){this.$el.find(":input").prop("disabled",!1).removeClass("disabled")},a.prototype.selectText=function(t){var e,n;window.getSelection?(n=window.getSelection(),(e=document.createRange()).selectNodeContents(t),n.removeAllRanges(),n.addRange(e)):document.body.createTextRange&&((e=document.body.createTextRange()).moveToElementText(t),e.select())},a.prototype.addEvents=function(t){var e,n,o,i,r;for(var s in t)if(t.hasOwnProperty(s)){if(o=t[s],e=s.substr(0,s.indexOf(" ")),n=s.substr(s.indexOf(" ")+1),"function"!=typeof(i="function"==typeof o?o:this[o]))throw console.warn("Unable to register function "+o),console.trace(),Error("Unable to register function "+o);r=e?this.$el:(e=n,n=null,$(this)),function(n,t,o,e,i){r.on(t,e,function(t){var e=$.extend(!0,[],arguments);e.push(this),o.apply(n,e)})}(this,e,i,n)}},a.prototype.getTplData=function(){return this.options},a.prototype.callParent=function(t,e){var n;i=i===this.extend?Bs.getClass(i).prototype.extend:this.extend;var o=Array.prototype.slice.call(arguments,1);return(n=Bs.getClass(i).prototype[t].apply(this,o))&&"then"in n?n.then(function(){i=null}):i=null,n},a.prototype.loadAdditionalScriptTemplate=function(t){return t=t||this.urlRoot+"/"+this.urlPath+"/"+this.camelName+".handlebars",Bs.Template.load(t,this.fullCamelName,!0)},a.prototype.setSubViewOptions=function(t,e){return this.subViewOptions[t]=e,this},a.prototype.getSubViewOptions=function(t){return this.subViewOptions.hasOwnProperty(t)?this.subViewOptions[t]:{}},a.define=function(t,e,n){n=n||function(){};var o=this,i=function(){},r=function(){return o.apply(this,arguments)};r.define=o.define,i.prototype=o.prototype,r.prototype=new i,e.abstract&&(r.prototype.hasStylesheet=!1,r.prototype.hasTranslation=!1,r.prototype.hasTemplate=!1),d(r.prototype,o.prototype,e),r.prototype.name=t,r.prototype.fullCamelName=y(t),r.prototype.urlPath=r.prototype.name.replace(/\./g,"/"),r.prototype.id=r.prototype.name.replace(/\./g,"-").toLowerCase(),r.prototype.elClass+=" "+r.prototype.id;var s=r.prototype.name.split(".");r.prototype.fileName=s[s.length-1],r.prototype.urlRoot="Bs"===s[0]?Bs.getConfig().urlCore:Bs.getConfig().urlApp,r.prototype.tplPath=r.prototype.urlPath+"/tpl",r.prototype.translationPath="inherit"===e.translationPath?o.prototype.translationPath:e.translationPath||r.prototype.urlPath;var a,l,u=r.prototype.fileName.charAt(0).toLowerCase();if(r.prototype.camelName=u+r.prototype.fileName.substr(1),r.prototype.cssPath="inherit"===e.cssPath?o.prototype.cssPath:e.cssPath||r.prototype.urlPath+"/"+r.prototype.camelName+".css","inherit"===e.tplPath&&(r.prototype.tplPath=o.prototype.tplPath),!Bs.isAsync())return a="inherit"===e.templatePath?(r.prototype.templatePath=o.prototype.templatePath,o.prototype.urlPath+"/"+o.prototype.camelName):(r.prototype.templatePath=e.templatePath||r.prototype.urlPath+"/"+r.prototype.camelName+".handlebars",r.prototype.urlPath+"/"+r.prototype.camelName),r.prototype.hasTranslation=!0,r.prototype.hasTemplate=!0,r.prototype.hasStylesheet=!0,Handlebars.templates.hasOwnProperty(a)&&(r.prototype.tpl=Handlebars.templates[a]),r;l="inherit"===e.templatePath?(r.prototype.templatePath=o.prototype.templatePath,(new $.Deferred).resolve()):(r.prototype.templatePath=e.templatePath||r.prototype.urlPath+"/"+r.prototype.camelName+".handlebars",g.call(r.prototype));var p=h.call(r.prototype),c=f.call(r.prototype);$.when(p,l,c).then(function(){r.prototype.hasTranslation=!0,r.prototype.hasTemplate=!0,r.prototype.hasStylesheet=!0,n(r)})};var i=null,d=function(t,e,n){var o=$.extend({},n);"string"==typeof n.require&&(n.require=[n.require]),n.model=n.model||[],!1===$.isArray(n.model)&&(n.model=[n.model]),n.model.length?t.model={}:t.model=t.model?$.extend(!0,{},t.model):{};for(var i,r=0;i=n.model[r];r++)"object"==typeof i?t.model[i.className]=i:t.model[i]=i;for(var s in t.data=$.extend(!0,{},e.data,n.data),t.params=$.extend(!0,{},e.params,n.params),t.options=$.extend(!0,{},e.options,n.options),t.events=$.extend(!0,{},e.events,n.events),t.require=Bs.Util.arrayUnion(e.require,n.require),t.triggeredEvents={},t.subViewList={},t.subViewOptions={},n.elClass&&(t.elClass+=" "+n.elClass),o.options=void 0,o.model=void 0,o.data=void 0,o.params=void 0,o.require=void 0,o.elClass=void 0,o)!1!==o.hasOwnProperty(s)&&void 0!==o[s]&&"events"!==s&&(s in t.options?null!==o[s]&&$.isPlainObject(o[s])?t.options[s]=$.extend(!0,{},t.options[s],o[s]):t.options[s]=o[s]:t[s]=o[s])},l=function(t,e){e=e||function(){};var i,r,n=new $.Deferred,s=this,a=[],l="",o=$(t),u=$("<div/>").html(o);return!1===this.hasTranslation?(e(u.html()),n.resolve()):(u.find("[data-i18n]").each(function(){for(var t in l="",i=$(this).attr("data-i18n").split(";"))if(i.hasOwnProperty(t))if(-1===i[t].indexOf(":")){var e=i[t];-1<(r=e.indexOf("]"))&&(r++,l=e.substring(0,r),e=e.substring(r));var n=l+s.translationPath+":"+e;0<t?$(this).attr("data-i18n",$(this).attr("data-i18n")+";"+n):$(this).attr("data-i18n",n)}else{var o=i[t].substring(0,i[t].indexOf(":"));-1<(r=o.indexOf("]"))&&(r++,l=o.substring(0,r),o=o.substring(r)),-1===a.indexOf(o)&&a.push(o)}}),a.length?Bs.Lang.loadNamespaces(a,function(){e(u.html()),n.resolve()}):(e(u.html()),n.resolve())),n},f=function(){var t;return this.hasStylesheet?(t=this.urlRoot+"/"+this.cssPath,Bs.Stylesheet.load(t)):(new $.Deferred).resolve()},h=function(){var t=new $.Deferred;return this.hasTranslation?(Bs.Lang.loadNamespace(this.translationPath,this.urlRoot,function(){t.resolve()}),t):t.resolve()},g=function(){var t,e=this,n=e.urlPath+"/"+e.camelName,o=new $.Deferred;return e.hasTemplate?Handlebars.templates.hasOwnProperty(n)?(e.tpl=Handlebars.templates[n],o.resolve()):(t=e.urlRoot+"/"+e.templatePath,Bs.Template.load(t,e.urlPath+"/"+e.camelName).then(function(){e.tpl=Handlebars.templates[n],o.resolve()})):o.resolve(),o},u=function(t){var e;if(null===t)return t;if($.isArray(t))return t;if(t.toObject)return t.toObject(!0);for(var n in e={},t)!1!==t.hasOwnProperty(n)&&null!==t[n]&&("object"==typeof t[n]&&t[n].toObject?e[n]=t[n].toObject(!0):e[n]=t[n]);return e},y=function(t){var e=t.replace(/\.(.)/g,function(t,e){return e.toUpperCase()});return e.charAt(0).toLowerCase()+e.substr(1)};return a}}),Bs.define("Bs.View.Module",{extend:"Bs.View",hasTemplate:!1,hasTranslation:!1,hasStylesheet:!1,options:{request:null,response:null},getRequest:function(){return this.options.request},getResponse:function(){return this.options.response}}),Bs.define("Bs.View.Modal",{extend:"Bs.View",autoRender:!0,elClass:"bootstrap",hasTranslation:!1,autoMask:!1,options:{view:"",content:"",title:"",subTitle:"",icon:"",size:"",bodyPadding:!0,viewOptions:null,closable:!0,backdrop:"static",data:{readyArgs:[]}},beforeCreateSubView:function(){var o=this,t=o.$el.find(".modal");if(o.options.view){var e=$.extend(!0,{onbeforeDestroy:function(){t.modal("hide")},onafterInitialize:function(){this.one("ready",function(t){if(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);o.data.readyArgs=e,t.preventDefault(),t.stopImmediatePropagation()}return!1})}},o.options.viewOptions);t.find(".view-content").attr("data-create",o.options.view).data("create",o.options.view).data("options",e)}else t.find(".view-content").html(o.options.content)},close:function(){$(window).off("resize",this.resize),this.$el.find(".modal").modal("hide")},resize:function(){this.$el.find(".view-content").css({height:$(window).height()-120})},afterRender:function(){var n=this,t=n.$el.find(".modal");""!==n.options.size&&t.find(".modal-dialog").addClass("modal-"+n.options.size),t.one("hidden.bs.modal",function(){n.destroy()}),t.find(".modal-title-main").html(n.options.title),t.find(".modal-title-sub").html(n.options.subTitle),t.find(".modal-icon").addClass(n.options.icon),t.one("shown.bs.modal",function(){var t=window.Modernizr&&Modernizr.flexbox;for(var e in n.subViewList)n.subViewList.hasOwnProperty(e)&&n.subViewList[e].trigger("ready",n.data.readyArgs);n.$el.find(".view-content").find("input").first().focus().select(),$.fn.draggable&&$(n.$el.find(".modal-content")).draggable({handle:".modal-header"}),n.options.size!==Bs.View.Modal.SIZE_MAX||t||($(window).on("resize",$.proxy(n.resize,n)),n.resize()),n.trigger("ready")}),t.modal({backdrop:n.options.backdrop,keyboard:n.options.closable}).css({"z-index":1051+n.zIndex}),t.data("bs.modal").$backdrop.css({"z-index":1050+n.zIndex})},mask:function(t){return Bs.View.prototype.mask.call(this,t,this.$el.find(".modal-body"))},unmask:function(t,e){return Bs.View.prototype.unmask.call(this,this.$el.find(".modal-body"),t,e)},events:{"click .view-close":function(){this.$el.find(".modal").modal("hide")}}},function(){Bs.View.Modal.SIZE_SMALL="sm",Bs.View.Modal.SIZE_LARGE="lg",Bs.View.Modal.SIZE_MAX="max",Bs.View.Modal.SIZE_FULL_WIDTH="fullWidth",Bs.View.Modal.SIZE_DEFAULT=""}),Bs.define("Bs.View.Modal.Alert",{extend:"Bs.View.Modal",require:["Bs.View.Alert"],templatePath:"inherit",translationPath:"inherit",options:{type:"info",title:"info.title",msg:"",translate:!0},initialize:function(){var t=this;t.options.dismissible=!1,t.options.viewOptions=$.extend(!0,{},t.options),t.options.title=null,t.options.view="Bs.View.Alert"}},function(){Bs.View.Modal.Alert.errorPage=function(t,e){return $("body").empty().addClass("bootstrap"),new Bs.View.Modal.Alert({type:"danger",title:"danger.title",msg:t,translate:!e})},Bs.View.Modal.Alert.Error=function(t,e){return new Bs.View.Modal.Alert({type:"danger",title:"danger.title",msg:t,translate:!e})},Bs.View.Modal.Alert.Warning=function(t,e){return new Bs.View.Modal.Alert({type:"warning",title:"warning.title",msg:t,translate:!e})},Bs.View.Modal.Alert.Success=function(t,e){return new Bs.View.Modal.Alert({type:"success",title:"success.title",msg:t,translate:!e})},Bs.View.Modal.Alert.Info=function(t,e){return new Bs.View.Modal.Alert({type:"info",title:"info.title",msg:t,translate:!e})}}),Bs.define("Bs.View.Loading",{extend:"Bs.View",elClass:"bootstrap",hasTranslation:!1,options:{text:""},afterInitialize:function(){"object"==typeof this.options.text&&null!==this.options.text&&(this.options.text=this.options.text.html())},autoMask:!1,urlRoot:Bs.getConfig().urlCore}),Bs.define("Bs.View.Collection",{require:["Bs.Collection","Bs.View.Modal.Alert"],extend:"Bs.View",collection:null,collectionOptions:null,collectionCache:!1,itemView:"",viewOptions:null,items:null,itemsByPk:null,id:"ViewCollection",name:"ViewCollection",fileName:"Collection",path:"Collection",emptyCollectionView:"Bs.View.Collection.Empty",emptyCollectionTemplate:null,autoFetch:!1,hasTemplate:!1,hasTranslation:!1,hasStylesheet:!1,options:{preventReady:!1},data:{$elCollection:null,$elEmptyCollection:null},initialize:function(){var e=this,t=new $.Deferred,n=new $.Deferred,o=new $.Deferred,i=e.autoRender;if(e.items=[],e.itemsByPk={},e.autoRender=!1,"string"==typeof e.collection?Bs.require(Bs.Util.addPrefixIfMissing("Collection",e.collection),function(t){e.collection=t(e.collectionOptions),e.collectionCache&&(e.collection.cache=!0),n.resolve()}):n.resolve(),!e.itemView)throw new Error("No item view defined");return Bs.require(Bs.Util.addPrefixIfMissing("View",e.itemView),function(){o.resolve()}),$.when(n,o).then(function(){e.autoFetch?(e.bindData=!0,i?e.fetchAndRender().then(function(){t.resolve()}):e.getCollection().fetch({done:function(){t.resolve()}})):i?e.render().then(function(){t.resolve()}):t.resolve()}),t},fetchAndRender:function(t){var e=this,n=new $.Deferred;return t=t||{},$.extend(t,{done:function(){e.render().then(function(){n.resolve()})},fail:function(){throw e.destroy(),Bs.View.Modal.Alert.Error("danger.msg.notFetched"),new Error("Unable to autoFetch collection")}}),null!==e.getCollection()?e.collectionCache&&e.getCollection().isInPool()?(e.collection=e.getCollection().getFromPool(),e.render().then(function(){n.resolve()})):e.getCollection().fetch(t):e.render().then(function(){n.resolve()}),n},afterRender:function(){},render:function(){var o=this,t=o.bindData,i=new $.Deferred;return o.bindData=!1,Bs.View.prototype.render.call(o).then(function(){o.bindData=t,o.data.$elCollection=o.$el.find("[data-collection]"),o.data.$elEmptyCollection=o.$el.find("[data-empty-collection]"),o.data.$elCollection.length||(o.data.$elCollection=o.$el),o.data.$elEmptyCollection.length||(o.data.$elEmptyCollection=o.data.$elCollection),o.renderCollection().then(function(){if(i.resolve(),o.options.preventReady||o.trigger("ready"),o.bindData){var n=o.getCollection().add;o.collection.add=function(t){var e=n.call(o.collection,t);return o.rendered&&!1===e.isNew()&&o.renderOne(e),e};var e=o.getCollection().remove;o.collection.remove=function(t){return e.call(o.collection,t),o.renderCollection(),t}}})}),i},addItem:function(t){var e=this;return e.data.$elEmptyCollection&&e.getCollection().isEmpty()&&e.data.$elEmptyCollection.empty(),e.renderOne(e.getCollection().add(t))},addTmpItem:function(t,e){var n=Bs.create(this.getCollection().model,t),o=this.renderOne(n);return e?o.edit():o},renderOne:function(t){var e=this;e.viewOptions=e.viewOptions||{};var n=$.extend(!0,{},e.viewOptions,{bindData:e.bindData,renderTo:e.data.$elCollection,model:t,getCollection:function(){return e.getCollection()},getViewCollection:function(){return e},viewCollection:e}),o=Bs.create(Bs.Util.addPrefixIfMissing("View",e.itemView),n);return e.items.push(o),t&&"getPK"in t&&(e.itemsByPk[t.getPK(!0)]=o),o},renderEmptyCollection:function(e){var n=this;e=e||function(){},n.emptyCollectionTemplate?(n.data.$elEmptyCollection.html(n.emptyCollectionTemplate),n.translate(),e()):Bs.require(n.emptyCollectionView,function(t){new t({renderTo:n.data.$elEmptyCollection,options:{viewCollection:n},onready:function(){e()}})})},renderErrorCollection:function(e){var n=this;e=e||function(){},Bs.require("Bs.View.Collection.Error",function(t){new t({renderTo:n.data.$elEmptyCollection.empty(),options:{viewCollection:n},onready:function(){e()}})})},renderCollection:function(t){var n,o=this,i=new $.Deferred,e=0,r=0,s=function(t){var e;n.model=t,e=Bs.create(Bs.Util.addPrefixIfMissing("View",o.itemView),n),o.items.push(e),t&&"getPK"in t&&(o.itemsByPk[t.getPK(!0)]=e),e.on("ready",function(){i.notify(e)})};return t||(o.items=[],o.itemsByPk={},o.data.$elCollection.empty(),o.data.$elEmptyCollection.empty()),o.getCollection().isEmpty()&&(o.emptyCollectionView||o.emptyCollectionTemplate)?o.renderEmptyCollection(function(){i.resolve()}):(r=o.getCollection().getLength(),i.progress(function(){++e===r?i.resolve():s(o.getCollection().getAt(e))}),o.viewOptions=o.viewOptions||{},n=$.extend(!0,{},o.viewOptions,{bindData:o.bindData,renderTo:o.data.$elCollection,viewCollection:o,getCollection:function(){return o.getCollection()},getViewCollection:function(){return o}}),s(o.getCollection().getAt(0))),i},getCollection:function(){return this.collection},each:function(t){for(var e,n=0;e=this.items[n];n++)t(e,n)}}),Bs.define("Bs.View.Collection.Error",{extend:"Bs.View",hasStylesheet:!1,urlRoot:Bs.getConfig().urlCore,autoMask:!1}),Bs.define("Bs.View.Collection.Empty",{extend:"Bs.View",hasStylesheet:!1,urlRoot:Bs.getConfig().urlCore,autoMask:!1}),Bs.define("Bs.View.Collection.Item",{extend:"Bs.View",restoreView:"Bs.View.Collection.Item.Restore",editView:null,abstract:!0,restorable:!1,editable:!1,viewCollection:null,autoMask:!1,data:{$restoreEl:null},initialize:function(){var t=new $.Deferred;return null!==this.editView?Bs.require(this.editView,function(){t.resolve()}):t.resolve(),t},edit:function(){var t=this,e=$("<div></div>"),n=t.getModel(),o=Bs.create(t.editView,{renderTo:e,model:n,itemView:t});return o.on("afterRender",function(){t.$el.hide(),t.$el.after(o.$el)}),o},getTplData:function(){return this.getModel()},getViewCollection:function(){return this.viewCollection},delete:function(){var t=this;t.mask(),t.getModel().delete({done:function(){t.getViewCollection().getCollection().remove(this),t.unmask(),t.remove()},fail:function(){t.unmask(),Bs.require("Bs.View.Modal.Alert",function(){Bs.View.Modal.Alert.Error("danger.msg.notSaved")})}})},remove:function(){var e=this;e.getModel().suppress(),e.options.restorable=!1,e.options.restorable?(e.$restoreEl=e.$el,e.$el.css({position:"relative"}),Bs.require(e.restoreView,function(t){new t({renderTo:e.$el})})):e.$el.slideUp()},restore:function(){this.options.restorable=!1,this.options.restorable||this.$el.slideDown()}}),Bs.define("Bs.View.Collection.Item.Edit",{extend:"Bs.View",hasTranslation:!1,hasStylesheet:!1,hasTemplate:!1,elTag:"tr",bindData:!0,itemView:null,cancel:function(){var t=this,e=t.getModel();e.reset(),t.destroy(),e.isNew()&&t.itemView.destroy(),t.itemView.$el.show(),t.afterAlways()},save:function(){var e=this,t=e.getModel(),n=t.isNew(),o=e.itemView.getViewCollection();e.disableInputs(),e.getModel().save({apiAction:"?useSlim=1",done:function(){n?o.addItem(t):e.itemView.$el.show().data("view").reset(),e.destroy(),e.afterDone(t)},fail:function(t){e.afterFailed(t)},always:function(){e.enableInputs(),e.afterAlways()}})},afterDone:function(t){Bs.View.Alert.Toast.success()},afterFailed:function(t){Bs.View.Alert.error(t.getErrorDescription())},afterAlways:function(){}}),Bs.define("Bs.View.Collection.Item.Restore",{extend:"Bs.View",hasTranslation:!1,hasStylesheet:!1,hasTemplate:!1,tpl:"<div>TODO</div>"}),Bs.define("Bs.View.Alert",{extend:"Bs.View",hasStylesheet:!1,autoMask:!1,elStyle:{position:"relative"},elClass:"bootstrap",options:{translate:!0,translateTitle:!0,icon:null,type:"info",title:null,hasTitle:!0,msg:null,view:null,viewOptions:null,dismissible:!0,autoDismissible:!1,cancelDismissOnHover:!1,delay:4e3},data:{idTimeout:null},initialize:function(){var t=this;if(t.callParent("initialize"),t.options.title||("default"===t.options.type?t.options.hasTitle=!1:t.options.title=t.options.type+".title"),!t.options.icon)switch(t.options.type){case"danger":t.options.icon="fa fa-exclamation-circle";break;case"warning":t.options.icon="fa fa-exclamation-triangle";break;case"success":t.options.icon="fa fa-check";break;case"info":t.options.icon="fa fa-info-circle";break;default:t.options.icon="fa fa-"+t.options.type}"danger"===t.options.type&&(t.options.autoDismissible=!1),t.options.view?t.options.translate=!1:t.options.msg instanceof jQuery?(t.options.msg=$("<div></div>").html(t.options.msg).html(),t.options.translate=!1):$.isArray(t.options.msg)?t.options.msg=t.options.msg[0].urlPath+":"+t.options.msg[1]:t.options.msg||("success"===t.options.type?t.options.msg=Bs.Lang.t("success_"):t.options.msg=Bs.Lang.t("unknown_error")),$.isArray(t.options.title)&&(t.options.title=t.options.title[0].urlPath+":"+t.options.title[1])},render:function(){var o=this;o.callParent("render"),o.$el.hide(),o.options.view?Bs.require(o.options.view,function(t){var e,n=o.options.viewOptions||{};n.renderTo=o.$el.find(".content"),e=new t(n),o.renderCallback(),e.on("close",function(){o.trigger("close")})}):o.renderCallback(),o.trigger("ready")},renderCallback:function(){var t=this;t.$el.slideDown(function(){t.trigger("shown"),t.$el.find(".alert-icon").fadeIn()}),t.options.autoDismissible&&(t.data.idTimeout&&clearTimeout(t.data.idTimeout),t.data.idTimeout=setTimeout(function(){t.close()},t.options.delay),t.options.cancelDismissOnHover&&t.$el.on("mouseover",function(){t.data.idTimeout&&(clearTimeout(t.data.idTimeout),t.data.idTimeout=null)}))},close:function(t){t&&(t.preventDefault(),t.stopPropagation());var e=this;return e.$el.find(".alert-icon").hide(),this.$el.slideUp(function(){e.$el.remove()}),!1},events:{"click .close":"close"}},function(){Bs.View.Alert.error=function(t,e,n){return new Bs.View.Alert({type:"danger",title:"danger.title",msg:t||"danger.msg.default",renderTo:e||"body",translate:!n})},Bs.View.Alert.warning=function(t,e,n){return new Bs.View.Alert({type:"warning",title:"warning.title",msg:t,renderTo:e||"body",translate:!n})},Bs.View.Alert.success=function(t,e,n){return new Bs.View.Alert({type:"success",title:"success.title",msg:t||"success.msg.default",renderTo:e||"body",translate:!n})},Bs.View.Alert.info=function(t,e,n){return new Bs.View.Alert({type:"info",title:"info.title",msg:t,renderTo:e||"body",translate:!n})},Bs.View.Alert.apiProblem=function(t,e){return console.log(t),t&&null!==t&&t.status&&t.detail&&t.title?new Bs.View.Alert({type:500<=t.status?"danger":"warning",msg:t.detail,translate:!1,translateTitle:!1,title:t.title,delay:3e4,renderTo:e||"body"}):Bs.View.Alert.error(null,e)}}),Bs.define("Bs.View.Alert.Toast",{extend:"Bs.View.Alert",translationPath:"inherit",options:{single:!0},initialize:function(){var t,e;this.callParent("initialize"),0===(e=(t=$("body")).find("#toast-container")).length&&(e=$('<div id="toast-container"></div>').appendTo(t)),this.options.single&&e.empty(),this.renderTo=e,this.options.autoDismissible=!0}},function(){Bs.View.Alert.Toast.error=function(t,e){return new Bs.View.Alert.Toast({type:"danger",msg:t,translate:!e})},Bs.View.Alert.Toast.warning=function(t,e){return new Bs.View.Alert.Toast({type:"warning",msg:t,translate:!e})},Bs.View.Alert.Toast.success=function(t,e){return new Bs.View.Alert.Toast({type:"success",msg:t,translate:!e})},Bs.View.Alert.Toast.info=function(t,e){return new Bs.View.Alert.Toast({type:"info",msg:t,translate:!e})},Bs.View.Alert.Toast.default=function(t,e){return new Bs.View.Alert.Toast({type:"default",msg:t,translate:!e})},Bs.View.Alert.Toast.apiProblem=function(t){return t&&null!==t&&t.status&&t.detail&&t.title?new Bs.View.Alert.Toast({type:500<=t.status?"danger":"warning",msg:t.detail,translate:!1,translateTitle:!1,title:t.title,delay:3e4}):Bs.View.Alert.Toast.error(null)}}),Bs.define("Bs.Util.Browser",{construct:function(){var i,t=function(t){for(var e=0;e<t.length;e++){var n=t[e].string,o=t[e].prop;if(i=t[e].versionSearch||t[e].identity,n){if(-1!=n.indexOf(t[e].subString))return t[e].identity}else if(o)return t[e].identity}},e=function(t){var e=t.indexOf(i);if(-1!=e)return parseFloat(t.substring(e+i.length+1))},n=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer",versionSearch:"rv:"},{string:navigator.userAgent,subString:"Edge",identity:"Explorer",versionSearch:"Edge/"}],o=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],r=t(n)||"An unknown browser",s=e(navigator.userAgent)||e(navigator.appVersion)||"an unknown version",a=t(o)||"an unknown OS";return{isChrome:function(){return"Chrome"===r},isIE:function(){return"Explorer"===r},isIE6:function(t){return this.isIEVersion(6,t)},isIE7:function(t){return this.isIEVersion(7,t)},isIE8:function(t){return this.isIEVersion(8,t)},isIE9:function(t){return this.isIEVersion(9,t)},isIE10:function(t){return this.isIEVersion(10,t)},isIE11:function(t){return this.isIEVersion(11,t)},isIEVersion:function(t,e){return"Explorer"===r&&(e?s===t:s<=t)},getVersion:function(){return s},getOS:function(){return a}}}}),Bs.define("Bs.Util.CallbackBuilder",{construct:function(){var t=function(){this.callbackList={}};return t.prototype={callbackList:null,add:function(t,e){return t in this.callbackList||(this.callbackList[t]=[]),this.callbackList[t].push(e),this},getAll:function(){return this.callbackList}},t}}),Bs.define("Bs.Util.UrlParser",{construct:function(){var t=function(t){this.initialize&&this.initialize.call(this,t)};return t.prototype.protocol=null,t.prototype.hostname=null,t.prototype.host=null,t.prototype.port=null,t.prototype.hash=null,t.prototype.pathname=null,t.prototype.search=null,t.prototype.params=null,t.prototype.getParams=function(){return this.params},t.prototype.initialize=function(t){var e,n,o,i,r,s,a=this,l={},u=document.createElement("a"),p={url:window.location.href,unescape:!0,convert_num:!0};if("object"!=typeof t)t=p;else for(n in p)p.hasOwnProperty(n)&&void 0===t[n]&&(t[n]=p[n]);if(u.href=t.url,1<(e=u.search.substring(1).split("&"))[0].length)for(o=0;o<e.length;o+=1)i=e[o].split("="),s=t.unescape?(r=decodeURI(i[0]),decodeURI(i[1])):(r=i[0],i[1]),t.convert_num&&(s.match(/^\d+$/)?s=parseInt(s,10):s.match(/^\d+\.\d+$/)&&(s=parseFloat(s))),void 0===l[r]?l[r]=s:"string"==typeof l[r]?l[r]=[l[r],s]:l[r].push(s),i=[];a.protocol=u.protocol,a.hostname=u.hostname,a.host=u.host,a.port=u.port,a.hash=u.hash.substr(1),a.pathname=u.pathname,a.search=u.search,a.params=l},t.prototype.get=function(t,e){return this.getParam(t,e)},t.prototype.getParam=function(t,e){return void 0===e&&(e=null),this.params.hasOwnProperty(t)?this.params[t]:e},t.prototype.set=function(t,e){this.params[t]=e;var n=window.location.href,o=t+"="+e,i=n.replace(new RegExp("(&|\\?)"+t+"=[^&|#]*"),"$1"+o);return i===n&&(i=-1!=n.indexOf("?")?n.split("?")[0]+"?"+o+"&"+n.split("?")[1]:-1!=n.indexOf("#")?n.split("#")[0]+"?"+o+"#"+n.split("#")[1]:n+"?"+o),history.replaceState(null,null,i),this},t}},function(){var n=null;Bs.Util.UrlParser.initialize=function(t){var e;e=(e=t)||{},n||(n=new Bs.Util.UrlParser(e))},Bs.Util.UrlParser.getInstance=function(){return function(){if(!n)throw Error("Initialization is not complete")}(),n}}),Bs.Lang.addResourceBundle("en","Bs/View/Alert",{info:{title:"Information",msg:{nothing:"Nothing to modify"}},success:{title:"Finished",msg:{saved:"Saved",default:"Operation successful"}},warning:{title:"Warning"},danger:{title:"Oops",msg:{notSaved:"Modifications not saved",notFetched:"Unexpected data received from server",default:"An error has occurred"}}}),Bs.Lang.addResourceBundle("en","Bs/View/Collection/Empty",{nothingToDisplay:"Nothing to display..."}),Bs.Lang.addResourceBundle("en","Bs/View/Collection/Error",{error:"Oops, something wrong happened there..."}),Bs.Lang.addResourceBundle("en","Bs/View/Modal",{}),Bs.Lang.addResourceBundle("fr","Bs/View/Alert",{info:{title:"Information",msg:{nothing:"Rien à modifier"}},success:{title:"Terminé",msg:{saved:"Modification effectuée",default:"Opération réussie"}},warning:{title:"Attention"},danger:{title:"Oups",msg:{notSaved:"Les modifications n'ont pas pu être enregistrées",notFetched:"Le serveur n'a pas renvoyé les données attendues",default:"Une erreur est survenue"}}}),Bs.Lang.addResourceBundle("fr","Bs/View/Collection/Empty",{nothingToDisplay:"Rien à afficher pour le moment..."}),Bs.Lang.addResourceBundle("fr","Bs/View/Collection/Error",{error:"Oups, il y a eu un problème..."}),Bs.Lang.addResourceBundle("fr","Bs/View/Modal",{}),Bs.Lang.addResourceBundle("nl","Bs/View/Alert",{info:{title:"Informatie",msg:{nothing:"Niets te wijzigen"}},success:{title:"Klaar",msg:{saved:"Wijziging doorgevoerd",default:"Met succes uitgevoerd"}},warning:{title:"Waarschuwing"},danger:{title:"Oops",msg:{notSaved:"De wijzigingen konden niet opgeslagen worden",notFetched:"De server heeft de verwachte gegevens niet teruggestuurd",default:"Er is een fout opgetreden"}}}),Bs.Lang.addResourceBundle("nl","Bs/View/Collection/Empty",{nothingToDisplay:"Momenteel niets te tonen…"}),Bs.Lang.addResourceBundle("nl","Bs/View/Collection/Error",{error:"Oops, something wrong happened there..."}),Bs.Lang.addResourceBundle("nl","Bs/View/Modal",{});